(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1064ea1d"],{"011a":function(t,e,s){t.exports=s.p+"kefu/img/no_chat.b9c3e583.png"},"03a9":function(t,e,s){},"060a":function(t,e,s){t.exports=s.p+"kefu/img/no_tk.401d40f4.png"},"0bb3":function(t,e,s){},"0e60":function(t,e,s){},"16b0":function(t,e,s){t.exports=s.p+"kefu/media/notice.51a07ae7.wav"},"17e9":function(t,e,s){},"18c2":function(t,e,s){},"21b5":function(t,e,s){"use strict";s("0e60")},2288:function(t,e,s){},"2f21":function(t,e,s){"use strict";var i=s("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3638:function(t,e,s){},"3ed8":function(t,e,s){},4112:function(t,e,s){t.exports=s.p+"kefu/img/no_user.a09b282b.png"},"468b":function(t,e,s){t.exports=s.p+"kefu/img/no_all.174e30c0.png"},"55dd":function(t,e,s){"use strict";var i=s("5ca1"),a=s("d8e8"),n=s("4bf8"),r=s("79e5"),o=[].sort,c=[1,2,3];i(i.P+i.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!s("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(n(this)):o.call(n(this),a(t))}})},"5a0c":function(t,e,s){!function(e,s){t.exports=s()}(0,(function(){"use strict";var t=1e3,e=6e4,s=36e5,i="millisecond",a="second",n="minute",r="hour",o="day",c="week",l="month",d="quarter",u="year",v="date",m="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(t,e,s){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(s)+t},g={s:p,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),i=Math.floor(s/60),a=s%60;return(e<=0?"+":"-")+p(i,2,"0")+":"+p(a,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var i=12*(s.year()-e.year())+(s.month()-e.month()),a=e.clone().add(i,l),n=s-a<0,r=e.clone().add(i+(n?-1:1),l);return+(-(i+(s-a)/(n?a-r:r-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:u,w:c,d:o,D:v,h:r,m:n,s:a,ms:i,Q:d}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},C="en",b={};b[C]=f;var y=function(t){return t instanceof k},w=function t(e,s,i){var a;if(!e)return C;if("string"==typeof e){var n=e.toLowerCase();b[n]&&(a=n),s&&(b[n]=s,a=n);var r=e.split("-");if(!a&&r.length>1)return t(r[0])}else{var o=e.name;b[o]=e,a=o}return!i&&a&&(C=a),a||!i&&C},x=function(t,e){if(y(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new k(s)},D=g;D.l=w,D.i=y,D.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var k=function(){function f(t){this.$L=w(t.locale,null,!0),this.parse(t)}var p=f.prototype;return p.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(h);if(i){var a=i[2]-1||0,n=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,n)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,n)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},p.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},p.$utils=function(){return D},p.isValid=function(){return!(this.$d.toString()===m)},p.isSame=function(t,e){var s=x(t);return this.startOf(e)<=s&&s<=this.endOf(e)},p.isAfter=function(t,e){return x(t)<this.startOf(e)},p.isBefore=function(t,e){return this.endOf(e)<x(t)},p.$g=function(t,e,s){return D.u(t)?this[e]:this.set(s,t)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(t,e){var s=this,i=!!D.u(e)||e,d=D.p(t),m=function(t,e){var a=D.w(s.$u?Date.UTC(s.$y,e,t):new Date(s.$y,e,t),s);return i?a:a.endOf(o)},h=function(t,e){return D.w(s.toDate()[t].apply(s.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),s)},_=this.$W,f=this.$M,p=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case u:return i?m(1,0):m(31,11);case l:return i?m(1,f):m(0,f+1);case c:var C=this.$locale().weekStart||0,b=(_<C?_+7:_)-C;return m(i?p-b:p+(6-b),f);case o:case v:return h(g+"Hours",0);case r:return h(g+"Minutes",1);case n:return h(g+"Seconds",2);case a:return h(g+"Milliseconds",3);default:return this.clone()}},p.endOf=function(t){return this.startOf(t,!1)},p.$set=function(t,e){var s,c=D.p(t),d="set"+(this.$u?"UTC":""),m=(s={},s[o]=d+"Date",s[v]=d+"Date",s[l]=d+"Month",s[u]=d+"FullYear",s[r]=d+"Hours",s[n]=d+"Minutes",s[a]=d+"Seconds",s[i]=d+"Milliseconds",s)[c],h=c===o?this.$D+(e-this.$W):e;if(c===l||c===u){var _=this.clone().set(v,1);_.$d[m](h),_.init(),this.$d=_.set(v,Math.min(this.$D,_.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},p.set=function(t,e){return this.clone().$set(t,e)},p.get=function(t){return this[D.p(t)]()},p.add=function(i,d){var v,m=this;i=Number(i);var h=D.p(d),_=function(t){var e=x(m);return D.w(e.date(e.date()+Math.round(t*i)),m)};if(h===l)return this.set(l,this.$M+i);if(h===u)return this.set(u,this.$y+i);if(h===o)return _(1);if(h===c)return _(7);var f=(v={},v[n]=e,v[r]=s,v[a]=t,v)[h]||1,p=this.$d.getTime()+i*f;return D.w(p,this)},p.subtract=function(t,e){return this.add(-1*t,e)},p.format=function(t){var e=this,s=this.$locale();if(!this.isValid())return s.invalidDate||m;var i=t||"YYYY-MM-DDTHH:mm:ssZ",a=D.z(this),n=this.$H,r=this.$m,o=this.$M,c=s.weekdays,l=s.months,d=function(t,s,a,n){return t&&(t[s]||t(e,i))||a[s].slice(0,n)},u=function(t){return D.s(n%12||12,t,"0")},v=s.meridiem||function(t,e,s){var i=t<12?"AM":"PM";return s?i.toLowerCase():i},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,"0"),MMM:d(s.monthsShort,o,l,3),MMMM:d(l,o),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:d(s.weekdaysMin,this.$W,c,2),ddd:d(s.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(n),HH:D.s(n,2,"0"),h:u(1),hh:u(2),a:v(n,r,!0),A:v(n,r,!1),m:String(r),mm:D.s(r,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:a};return i.replace(_,(function(t,e){return e||h[t]||a.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(i,v,m){var h,_=D.p(v),f=x(i),p=(f.utcOffset()-this.utcOffset())*e,g=this-f,C=D.m(this,f);return C=(h={},h[u]=C/12,h[l]=C,h[d]=C/3,h[c]=(g-p)/6048e5,h[o]=(g-p)/864e5,h[r]=g/s,h[n]=g/e,h[a]=g/t,h)[_]||g,m?C:D.a(C)},p.daysInMonth=function(){return this.endOf(l).$D},p.$locale=function(){return b[this.$L]},p.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),i=w(t,e,!0);return i&&(s.$L=i),s},p.clone=function(){return D.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),j=k.prototype;return x.prototype=j,[["$ms",i],["$s",a],["$m",n],["$H",r],["$W",o],["$M",l],["$y",u],["$D",v]].forEach((function(t){j[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,k,x),t.$i=!0),x},x.locale=w,x.isDayjs=y,x.unix=function(t){return x(1e3*t)},x.en=b[C],x.Ls=b,x.p={},x}))},"5dc8":function(t,e,s){"use strict";s("17e9")},"5f70":function(t,e,s){t.exports=s.p+"kefu/img/no_fh.977a0fb8.png"},"605d":function(t,e,s){"use strict";s("c8db")},6371:function(t,e,s){"use strict";s("3ed8")},"67cd":function(t,e,s){"use strict";s("3638")},"68e0":function(t,e,s){"use strict";s("741a")},"741a":function(t,e,s){},8841:function(t,e,s){"use strict";s("2288")},8933:function(t,e,s){"use strict";s("03a9")},"9b81":function(t,e,s){"use strict";s("ed5e")},bd9b:function(t,e){t.exports="data:image/jpeg;base64,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"},c86c:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"kefu-layouts",on:{click:t.roomClick}},[s("div",{staticClass:"content-wrapper",on:{click:function(e){t.press=!1}}},[s("baseHeader",{attrs:{"is-online":t.isOnline},on:{online:t.changeOnline}}),t._v(" "),s("div",{staticClass:"container"},[s("chatList",{ref:"chatList",on:{active:t.activeUser}}),t._v(" "),s("div",{staticClass:"chat-content"},[s("div",{staticClass:"chat-body"},[s("div",{ref:"scrollBox",attrs:{id:"chat_scroll"},on:{scroll:t.scrollHandler}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"center"}},[s("i",{staticClass:"el-icon-loading"})]),t._v(" "),t._l(t.chatList,(function(e){return s("div",{key:e.time,attrs:{id:"chat_"+e.time}},[s("div",{staticClass:"time"},[t._v(t._s(e.time))]),t._v(" "),t._l(e.children,(function(e){return s("div",{key:e.service_log_id,staticClass:"chat-item",class:[{"right-box":1==e.send_type},{gary:5==e.msn_type}],attrs:{id:"chat_"+e.service_log_id}},[s("div",{staticClass:"flex-box"},[100!=e.msn_type?s("div",{staticClass:"avatar"},[0==e.send_type&&e.user?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.user.avatar,expression:"item.user.avatar"}],attrs:{alt:""}}):s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.service.avatar,expression:"item.service.avatar"}],attrs:{alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"msg-wrapper",on:{contextmenu:function(s){return s.preventDefault(),t.showReverst(e)}}},[1===e.msn_type?[s("div",{staticClass:"txt-wrapper pad16",domProps:{innerHTML:t._s(e.msn)}})]:t._e(),t._v(" "),2===e.msn_type?[s("div",{staticClass:"txt-wrapper pad16"},[s("i",{class:"em "+e.msn})])]:t._e(),t._v(" "),3==e.msn_type?[s("div",{staticClass:"img-wraper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.msn,expression:"item.msn"}],attrs:{alt:""}})])]:t._e(),t._v(" "),4==e.msn_type?[s("div",{staticClass:"order-wrapper pad16"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.product.image,alt:""}})]),t._v(" "),s("div",{staticClass:"order-info"},[s("div",{staticClass:"name line1"},[t._v("\n                            "+t._s(e.product.store_name)+"\n                          ")]),t._v(" "),s("div",{staticClass:"sku"},[t._v("\n                            库存："+t._s(e.product.stock)+" 销量："+t._s(parseInt(e.product.sales)+parseInt(e.product.ficti?e.product.ficti:0))+"\n                          ")]),t._v(" "),s("div",{staticClass:"price-box"},[s("div",{staticClass:"num"},[t._v("\n                              ¥ "+t._s(e.product.price)+"\n                            ")]),t._v(" "),s("a",{staticClass:"more",attrs:{herf:"javascript:;"},on:{click:function(s){return s.stopPropagation(),t.lookGoods(e.product.product_id)}}},[t._v("查看商品 >")])])])])]:t._e(),t._v(" "),7==e.msn_type?[e.presell?s("div",{staticClass:"order-wrapper pad16"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.presell.product.image,alt:""}})]),t._v(" "),s("div",{staticClass:"order-info"},[s("div",{staticClass:"name line1"},[t._v("\n                            "+t._s(e.presell.product.store_name)+"\n                          ")]),t._v(" "),s("div",{staticClass:"sku"},[t._v("\n                            库存："+t._s(e.presell.product.stock)+" 销量："+t._s(parseInt(e.presell.product.sales)+parseInt(e.presell.product.ficti?e.presell.product.ficti:0))+"\n                          ")]),t._v(" "),s("div",{staticClass:"price-box"},[s("div",{staticClass:"num"},[t._v("\n                              ¥ "+t._s(e.presell.product.price)+"\n                            ")]),t._v(" "),s("a",{staticClass:"more",attrs:{herf:"javascript:;"},on:{click:function(s){return s.stopPropagation(),t.lookGoods(e.presell.product.product_id)}}},[t._v("查看商品 >")])])])]):t._e()]:t._e(),t._v(" "),5===e.msn_type&&e.orderInfo&&e.orderInfo.order_id?t._l(e.orderInfo.orderProduct,(function(i,a){return s("div",{key:i.id,staticClass:"order-wrapper pad16"},[0==a?s("div",{staticClass:"img-box"},[s("img",{attrs:{src:i.cart_info.product.image,alt:""}})]):t._e(),t._v(" "),0==a?s("div",{staticClass:"order-info"},[s("div",{staticClass:"name line1"},[t._v("\n                            订单号："+t._s(e.orderInfo.order_sn)+"\n                          ")]),t._v(" "),s("div",{staticClass:"sku"},[t._v("\n                            商品数量："+t._s(e.orderInfo.total_num)+"\n                          ")]),t._v(" "),s("div",{staticClass:"price-box"},[s("div",{staticClass:"num"},[t._v("\n                              ¥ "+t._s(e.orderInfo.pay_price)+"\n                            ")]),t._v(" "),s("a",{staticClass:"more",attrs:{href:"javascript:;"},on:{click:function(s){return s.stopPropagation(),t.lookOrder(e)}}},[t._v("查看订单 >")])])]):t._e()])})):t._e(),t._v(" "),6===e.msn_type&&e.refundOrder&&e.refundOrder.refund_order_id?t._l(e.refundOrder.refundProduct,(function(i,a){return s("div",{key:i.id,staticClass:"order-wrapper pad16"},[0==a?s("div",{staticClass:"img-box"},[s("img",{attrs:{src:i.product.cart_info.product.image,alt:""}})]):t._e(),t._v(" "),0==a?s("div",{staticClass:"order-info"},[s("div",{staticClass:"name line1"},[t._v("\n                            退款单号："+t._s(e.refundOrder.refund_order_sn)+"\n                          ")]),t._v(" "),s("div",{staticClass:"sku"},[t._v("\n                            商品数量："+t._s(e.refundOrder.refund_num)+"\n                          ")]),t._v(" "),s("div",{staticClass:"price-box"},[s("div",{staticClass:"num"},[t._v("\n                              ¥ "+t._s(e.refundOrder.refund_price)+"\n                            ")]),t._v(" "),s("a",{staticClass:"more",attrs:{href:"javascript:;"},on:{click:function(s){return t.lookRefundOrder(e)}}},[t._v("查看退款单 >")])])]):t._e()])})):t._e()],2),t._v(" "),100===e.msn_type?[s("div",{staticClass:"recall-msg"},[t._v(t._s(1==e.send_type?"你撤回了一条消息":"对方撤回了一条消息"))])]:t._e(),t._v(" "),e.longpress&&t.press&&(new Date).getTime()/1e3-e.send_time<=120?s("div",{staticClass:"recall"},[(new Date).getTime()/1e3-e.send_time<=120?s("div",{staticClass:"recall-item",on:{click:function(s){return s.stopPropagation(),t.reverstMsg(e)}}},[t._v("撤回")]):t._e()]):t._e()],2)])}))],2)}))],2)]),t._v(" "),s("div",{staticClass:"chat-textarea"},[s("div",{staticClass:"chat-btn-wrapper"},[t.active&&t.isOnline&&!t.closed?s("div",{staticClass:"left-wrapper"},[s("div",{staticClass:"icon-item"},[s("el-upload",{attrs:{"show-file-list":!1,headers:t.header,data:t.uploadData,"on-success":t.handleSuccess,format:["jpg","jpeg","png","gif"],"on-format-error":t.handleFormatError,"before-upload":t.onBeforeUpload,action:t.upload}},[s("span",{staticClass:"iconfont icontupian1"})])],1),t._v(" "),s("div",{staticClass:"icon-item",on:{click:function(e){e.stopPropagation(),t.isEmoji=!t.isEmoji}}},[s("span",{staticClass:"iconfont iconbiaoqing1"})])]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isEmoji,expression:"isEmoji"}],staticClass:"emoji-box"},t._l(t.emojiList,(function(e,i){return s("div",{key:i,staticClass:"emoji-item"},[s("i",{staticClass:"em",class:e,on:{click:function(s){return s.stopPropagation(),t.select(e)}}})])})),0)]),t._v(" "),s("div",{staticClass:"textarea-box",staticStyle:{position:"relative"}},[s("el-input",{staticStyle:{"font-size":"14px"},attrs:{type:"textarea",rows:4,placeholder:"请输入文字内容"},nativeOn:{keydown:function(e){return t.chatKeydown(e)}},model:{value:t.chatCon,callback:function(e){t.chatCon=e},expression:"chatCon"}}),t._v(" "),s("div",{staticClass:"send-btn"},[s("el-button",{staticClass:"btns",attrs:{type:"primary",disabled:!t.chatCon.trim()},on:{click:function(e){return e.stopPropagation(),t.sendText(e)}}},[t._v("发送\n                ")])],1)],1)])]),t._v(" "),s("div",{staticStyle:{width:"280px",overflow:"hidden"}},[s("rightMenu",{attrs:{user:t.active}})],1)],1)],1),t._v(" "),s("msgWindow",{ref:"msgWindow"}),t._v(" "),s("goodsDetail",{ref:"goodsDetail",attrs:{"goods-id":t.goodsId}}),t._v(" "),s("orderDetail",{ref:"orderDetail",attrs:{"order-id":t.orderId}}),t._v(" "),s("refundOrderDetail",{ref:"refundOrderDetail",attrs:{"order-id":t.orderId}})],1)},a=[],n=(s("ac6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"base-header"},[s("div",{staticClass:"left-wrapper"},[s("div",{staticClass:"user_info"},[s("img",{attrs:{src:t.merchant.avatar}}),t._v(" "),s("span",[t._v(t._s(t.merchant.name))]),t._v(" "),t.ServiceInfo?s("span",{staticStyle:{"margin-left":"3px"}},[t._v(" - "+t._s(t.ServiceInfo.nickname))]):t._e(),t._v(" "),s("div",{staticClass:"status-box"},[s("div",{staticClass:"status",class:t.isOnline?"on":"off",on:{click:function(e){return e.stopPropagation(),t.setOnline(e)}}},[s("span",{staticClass:"dot"}),t._v("\n          "+t._s(t.isOnline?"在线":"下线")+"\n        ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.onlinePop,expression:"onlinePop"}],staticClass:"online-down"},[s("div",{staticClass:"item",on:{click:function(e){return e.stopPropagation(),t.changeOnline(!0)}}},[t.isOnline?s("span",{staticClass:"iconfont iconduihao"}):t._e(),s("i",{staticClass:"green"}),t._v("在线\n          ")]),t._v(" "),s("div",{staticClass:"item",on:{click:function(e){return e.stopPropagation(),t.changeOnline(!1)}}},[t.isOnline?t._e():s("span",{staticClass:"iconfont iconduihao"}),s("i"),t._v("下线\n          ")])])])]),t._v(" "),s("div",{staticClass:"out-btn",on:{click:function(e){return e.stopPropagation(),t.outLogin(e)}}},[t._v("退出登录")])])])}),r=[],o=s("c80c"),c=(s("96cf"),s("3b8d")),l=s("42e3"),d=s("83d6"),u=s("a78e"),v=s.n(u),m={name:"BaseHeader",props:{isOnline:Boolean},data:function(){return{merchant:{},onlinePop:!1,ServiceInfo:null}},computed:{},watch:{$route:function(){var t=v.a.get("ServiceInfo");t&&(this.ServiceInfo=JSON.parse(t))}},mounted:function(){var t=this;Object(l["l"])().then((function(e){t.merchant=e.data})),document.addEventListener("click",(function(){t.onlinePop=!1}));var e=v.a.get("ServiceInfo");e&&(this.ServiceInfo=JSON.parse(e))},methods:{setOnline:function(){this.onlinePop=!this.onlinePop},changeOnline:function(t){this.setOnline(),this.isOnline!=t&&this.$emit("online",t)},outLogin:function(){var t=this;this.$confirm("您确定退出登录当前账户吗？",{title:"退出登录确认"}).then(Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("user/logout");case 2:setTimeout((function(){location.href="".concat(d["roterPre"],"/login?redirect=").concat(t.$route.fullPath)}),300);case 3:case"end":return e.stop()}}),e)}))))}}},h=m,_=(s("68e0"),s("2877")),f=Object(_["a"])(h,n,r,!1,null,"7409452e",null),p=f.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chatList"},[s("div",{staticClass:"tab-head"},[s("ElInput",{attrs:{"prefix-icon":"el-icon-search",placeholder:"搜索用户名称",size:"mini"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.handleScroll,expression:"handleScroll"}],staticClass:"scroll-box",staticStyle:{height:"100%"},attrs:{"infinite-scroll-disabled":t.loading||t.loaded}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"center","margin-bottom":"10px"}},[s("i",{staticClass:"el-icon-loading"})]),t._v(" "),t.userList.length>0?t._l(t.userList,(function(e,i){return s("div",{key:i,staticClass:"chat-item",class:{active:t.curId==e.service_user_id},on:{click:function(s){return t.selectUser(e)}}},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.user&&e.user.avatar,expression:"item.user && item.user.avatar"}],attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"status",class:{off:0==e.is_online}})]),t._v(" "),s("div",{staticClass:"user-info"},[e.user?s("div",{staticClass:"hd"},[s("span",{staticClass:"name line1"},[t._v(t._s(e.user.nickname))]),t._v(" "),"routine"===e.user.user_type?[s("span",{staticClass:"label"},[t._v("小程序")])]:t._e(),t._v(" "),"h5"===e.user.user_type?[s("span",{staticClass:"label H5"},[t._v("WEB")])]:t._e(),t._v(" "),"wechat"===e.user.user_type?[s("span",{staticClass:"label wechat"},[t._v("公众号")])]:t._e(),t._v(" "),"apple"===e.user.user_type?[s("span",{staticClass:"label pc"},[t._v("APP")])]:t._e()],2):t._e(),t._v(" "),e.last?s("div",{staticClass:"bd line1"},[1===e.last.msn_type?[t._v(t._s(e.last.msn))]:t._e(),t._v(" "),2===e.last.msn_type?[t._v("[表情]")]:t._e(),t._v(" "),3===e.last.msn_type?[t._v("[图片]")]:t._e(),t._v(" "),4===e.last.msn_type?[t._v("[商品]")]:t._e(),t._v(" "),5===e.last.msn_type||6===e.last.msn_type?[t._v("[订单]")]:t._e()],2):t._e()]),t._v(" "),s("div",{staticClass:"right-box"},[e.last?s("div",{staticClass:"time"},[t._v(t._s(t._f("toDay")(e.last.create_time)))]):t._e(),t._v(" "),e.service_unread>0&&t.curId!=t.userList[0].service_user_id?s("div",{staticClass:"num"},[s("ElBadge",{attrs:{value:e.service_unread}},[s("a",{staticClass:"demo-badge",attrs:{href:"#"}})])],1):t._e()])])})):t._e(),t._v(" "),t.loaded&&!t.userList.length?s("empty",{attrs:{msg:"暂无用户列表",status:"1"}}):t._e()],2)])},C=[],b=s("5a0c"),y=s.n(b),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty-wrapper"},[1==t.status?[i("img",{attrs:{src:s("011a"),alt:""}})]:t._e(),t._v(" "),2==t.status?[i("img",{attrs:{src:s("4112"),alt:""}})]:t._e(),t._v(" "),3==t.status?[i("img",{attrs:{src:s("468b"),alt:""}})]:t._e(),t._v(" "),4==t.status?[i("img",{attrs:{src:s("ea87"),alt:""}})]:t._e(),t._v(" "),5==t.status?[i("img",{attrs:{src:s("5f70"),alt:""}})]:t._e(),t._v(" "),6==t.status?[i("img",{attrs:{src:s("060a"),alt:""}})]:t._e(),t._v(" "),i("p",[t._v(t._s(t.msg))])],2)},x=[],D=(s("c5f6"),{name:"Empty",props:{status:{type:[String,Number],default:1},msg:{type:String,default:""}}}),k=D,j=(s("ef44"),Object(_["a"])(k,w,x,!1,null,"bf5ce538",null)),O=j.exports,S={name:"ChatList",components:{empty:O},filters:{toDay:function(t){return t?y()(t).format("M月D日 HH:mm"):""}},data:function(){return{keyword:"",userList:[],curId:"",page:1,limit:15,loaded:!1,loading:!1}},mounted:function(){this.getList()},methods:{submit:function(){this.page=1,this.loaded=!1,this.loading=!1,this.getList()},updateChatList:function(){var t=1,e=(this.page-1)*this.limit;this.getList({page:t,limit:e})},getList:function(t){var e=this;!t&&this.loaded||!t&&this.loading||(t||(this.loading=!0),Object(l["o"])({page:t?t.page:this.page,limit:t?t.limit:this.limit,keyword:this.keyword}).then((function(s){var i=s.data.list;t?e.userList=i:(e.loaded=i.length<e.limit,e.userList=1==e.page?i:e.userList.concat(i),!e.curId&&i.length>0&&e.$emit("active",i[0]),e.page++,e.loading=!1)})))},selectUser:function(t){this.curId!=t.service_user_id&&(t.service_unread=0,this.curId=t.service_user_id,this.$emit("active",t))},handleScroll:function(){this.getList()}}},L=S,M=(s("9b81"),Object(_["a"])(L,g,C,!1,null,"4ba58645",null)),$=M.exports,A=["em-tlj-1","em-tlj-2","em-tlj-3","em-tlj-4","em-tlj-5","em-tlj-6","em-tlj-7","em-tlj-8","em-tlj-9","em-tlj-10","em-tlj-11","em-tlj-12","em-tlj-13","em-tlj-14","em-tlj-15","em-tlj-16","em-tlj-17","em-tlj-18","em-tlj-19","em-tlj-20","em-tlj-21","em-tlj-22","em-tlj-23","em-tlj-24","em-tlj-25","em-tlj-26","em-tlj-27","em-tlj-28","em-tlj-29","em-tlj-30","em-tlj-31","em-tlj-32","em-tlj-33","em-tlj-34","em-tlj-35","em-tlj-36","em-tlj-37","em-tlj-38","em-tlj-39","em-tlj-40","em-tlj-41","em-tlj-42","em-tlj-43","em-tlj-44","em-tlj-45","em-tlj-46","em-tlj-47","em-tlj-48","em-tlj-49","em-tlj-50","em-tlj-51","em-tlj-52","em-tlj-53","em-tlj-54","em-tlj-55","em-tlj-56","em-tlj-57","em-tlj-58","em-tlj-59","em-tlj-60","em-tlj-61","em-tlj-62","em-tlj-63","em-tlj-64","em-tlj-65","em-tlj-66","em-tlj-67","em-tlj-68","em-tlj-69","em-tlj-70","em-tlj-71","em-tlj-72","em-tlj-73","em-tlj-74","em-tlj-75","em-tlj-76","em-tlj-77","em-tlj-78","em-tlj-79","em-tlj-80","em-tlj-81","em-tlj-82","em-tlj-83","em-tlj-84","em-tlj-85","em-tlj-86","em-tlj-87","em-tlj-88","em-tlj-89","em-tlj-90","em-tlj-91","em-tlj-92","em-tlj-93","em-tlj-94","em-tlj-95","em-tlj-96"],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"商品详情",visible:t.dialogVisible,width:"375px","show-close":!1,top:"6vh","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"title-box",attrs:{slot:"title"},slot:"title"},[t._v("商品详情")]),t._v(" "),s("div",{staticClass:"goods_detail",staticStyle:{height:"600px"}},[s("el-scrollbar",{staticStyle:{height:"100%"}},[s("div",{staticStyle:{width:"375px"}},[s("div",{staticClass:"swiper-box"},[s("el-carousel",{attrs:{"indicator-position":"outside",autoplay:""}},t._l(t.goodsInfo.slider_image,(function(t,e){return s("el-carousel-item",{key:e},[s("div",{staticClass:"demo-carousel"},[s("img",{attrs:{src:t,alt:""}})])])})),1)],1),t._v(" "),s("div",{staticClass:"goods_info"},[s("div",{staticClass:"number-wrapper"},[s("div",{staticClass:"price"},[s("span",[t._v("¥")]),t._v(t._s(t.goodsInfo.price))])]),t._v(" "),s("div",{staticClass:"name"},[t._v(t._s(t.goodsInfo.store_name))]),t._v(" "),s("div",{staticClass:"msg"},[s("div",{staticClass:"item"},[t._v("市场价:￥"+t._s(t.goodsInfo.ot_price))]),t._v(" "),s("div",{staticClass:"item"},[t._v("库存:"+t._s(t.goodsInfo.stock))]),t._v(" "),s("div",{staticClass:"item"},[t._v("销量:"+t._s(t.goodsInfo.sales))])])]),t._v(" "),s("div",{staticClass:"con-box"},[s("div",{staticClass:"title-box"},[t._v("商品介绍")]),t._v(" "),t.goodsInfo.content?s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.goodsInfo.content.content)}}):t._e()])])])],1)])},I=[],T={name:"GoodsDetail",data:function(){return{value2:0,dialogVisible:!1,goodsInfo:{content:{}}}},mounted:function(){},methods:{openBox:function(t){this.dialogVisible=!0,this.getInfo(t)},getInfo:function(t){var e=this;Object(l["n"])(t).then((function(t){e.goodsInfo=t.data}))},handleClose:function(){this.dialogVisible=!1}}},P=T,F=(s("d6c7"),s("ed97"),Object(_["a"])(P,E,I,!1,null,"39697127",null)),B=F.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right-wrapper"},[[t.user?s("div",{staticClass:"user-wrapper"},[s("div",{staticClass:"user"},[t.user.user?s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.user.user.avatar,expression:"user.user.avatar"}],attrs:{alt:""}})]):t._e(),t._v(" "),s("div",{staticClass:"name line1"},[t._v(t._s(t.user.user.nickname))]),t._v(" "),s("div",{staticClass:"label"},["routine"===t.user.user.user_type?[s("span",{staticClass:"label routine"},[t._v("小程序")])]:t._e(),t._v(" "),"h5"===t.user.user.user_type?[s("span",{staticClass:"label H5"},[t._v("WEB")])]:t._e(),t._v(" "),"wechat"===t.user.user.user_type?[s("span",{staticClass:"label wechat"},[t._v("公众号")])]:t._e(),t._v(" "),"apple"===t.user.user.user_type?[s("span",{staticClass:"label pc"},[t._v("APP")])]:t._e()],2)]),t._v(" "),s("div",{staticClass:"user-info"},[s("div",{staticClass:"item"},[s("span",[t._v("手机号: ")]),t._v("\n          "+t._s(t.user.user.phone||"暂无")+"\n        ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("备　注: ")]),t._v(" "),t.showText?t._e():[t.user.mark?s("div",{staticStyle:{"word-wrap":"break-word"},on:{click:t.showTextFn}},[t._v(t._s(t.user.mark))]):s("div",{staticClass:"item-mark",on:{click:t.showTextFn}},[t._v("请输入")])],t._v(" "),t.showText?s("ElInput",{ref:"input",attrs:{type:"textarea",rows:4},on:{blur:t.changeMark},model:{value:t.user.mark,callback:function(e){t.$set(t.user,"mark",e)},expression:"user.mark"}}):t._e()],2)]),t._v(" "),s("div",{staticClass:"user-info"},[s("div",{staticClass:"item"},[s("span",[t._v("推荐人: ")]),t._v(" "),t.user.user.spread?[t._v(t._s(t.user.user.spread.nickname))]:[t._v("暂无")]],2),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("余　额: ")]),t._v("\n          "+t._s(t.user.user.now_money)+"\n        ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("推广员: ")]),t._v(t._s(t.user.user.is_promoter?"是":"否")+"\n        ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("生　日: ")]),t._v("\n          "+t._s(t._f("getDay")(t.user.user.birthday))+"\n        ")])])]):s("empty",{attrs:{status:"2",msg:"暂无用户信息"}})]],2)},V=[],H={name:"RightMenu",components:{empty:O},filters:{getDay:function(t){return t?y()(t).format("YYYY年M月D日"):"未知"}},props:{user:{}},data:function(){return{mark:"",showText:!1,limit:10,page:1}},methods:{showTextFn:function(){var t=this;this.showText=!0,this.$nextTick((function(){t.$refs.input.focus()}))},changeMark:function(){var t=this;this.showText=!1,Object(l["e"])(this.user.uid,this.user.mark).then((function(e){t.$message.success("设置成功")})).catch((function(e){t.$message.error("设置失败")}))}}},z=H,W=(s("8933"),Object(_["a"])(z,N,V,!1,null,"2493df8c",null)),Y=W.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"商品详情",visible:t.dialogVisible,width:"600px","show-close":!0,top:"10vh","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"head",attrs:{slot:"title"},slot:"title"},[s("div",{staticClass:"tab-bar"},t._l(t.tabList,(function(e,i){return s("a",{key:i,staticClass:"tab-item",class:{on:e.key==t.tabCur},attrs:{href:"javascript:;"},on:{click:function(s){return t.bindTab(e)}}},[t._v(t._s(e.title))])})),0),t._v(" "),s("div",{staticClass:"search-box"},[s("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"搜索快捷回复",size:"small"},on:{"on-enter":t.bindSearch},model:{value:t.searchTxt,callback:function(e){t.searchTxt=e},expression:"searchTxt"}},[s("i",{staticClass:"el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)]),t._v(" "),s("div",{staticClass:"msg-box"},[s("div",{staticClass:"main"},[s("div",{staticClass:"left-box",staticStyle:{height:"365px"}},[s("el-scrollbar",{staticStyle:{height:"100%"}},[t.tabCur?s("div",{staticClass:"left-item"},[s("p",[t._v("分组")]),t._v(" "),s("span",{staticClass:"el-icon-plus",on:{click:t.openAddSort}})]):t._e(),t._v(" "),t._l(t.sortList,(function(e,i){return s("div",{key:i,staticClass:"left-item",class:{on:t.cateId==e.id},on:{click:function(s){return t.selectSort(e)}}},[s("p",[t._v(t._s(e.name))]),t._v(" "),t.tabCur?[s("span",{staticClass:"iconfont iconDot",on:{click:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"top",void 0,s.key,void 0)?null:t.bindEdit(e,i)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"item.isEdit"}],staticClass:"edit-wrapper"},[s("div",{staticClass:"edit-item",on:{click:function(s){return t.editSort(e)}}},[t._v("编辑")]),t._v(" "),s("div",{staticClass:"edit-item",on:{click:function(s){return t.delSort(e,"删除分类",i)}}},[t._v("删除")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"item.isEdit"}],staticClass:"edit-bg",on:{click:function(t){t.stopPropagation(),e.isEdit=!1}}})]:t._e()],2)}))],2)],1),t._v(" "),s("div",{staticClass:"right-box"},[s("div",{staticClass:"right-scroll",staticStyle:{height:"360px"}},[s("el-scrollbar",{staticStyle:{height:"100%"}},[t.tabCur?s("div",{staticClass:"msg-item add-box",staticStyle:{"margin-top":"0"}},[s("div",{staticClass:"box2"},[s("el-input",{staticClass:"input-box",staticStyle:{width:"100%"},attrs:{placeholder:"输入标题（选填）"},on:{focus:t.bindFocus},model:{value:t.addMsg.title,callback:function(e){t.$set(t.addMsg,"title",e)},expression:"addMsg.title"}}),t._v(" "),s("div",{staticClass:"conBox",class:{active:t.addMsg.isEdit}},[s("div",{staticClass:"content"},[s("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.addMsg.message,callback:function(e){t.$set(t.addMsg,"message",e)},expression:"addMsg.message"}})],1),t._v(" "),s("div",{staticClass:"bom"},[s("div",{staticClass:"select"},[s("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},model:{value:t.addMsg.cateId,callback:function(e){t.$set(t.addMsg,"cateId",e)},expression:"addMsg.cateId"}},t._l(t.sortList,(function(e){return s("el-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),s("div",{staticClass:"btns-box"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){e.stopPropagation(),t.addMsg.isEdit=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return e.stopPropagation(),t.bindAdd(e)}}},[t._v("保存")])],1)])])],1)]):t._e(),t._v(" "),t._l(t.list,(function(e,i){return e.id?s("div",{key:i,staticClass:"msg-item"},[e.isEdit?s("div",{staticClass:"box2"},[s("el-input",{staticClass:"input-box",staticStyle:{width:"100%"},attrs:{placeholder:"输入标题（选填）"},model:{value:e.title,callback:function(s){t.$set(e,"title",s)},expression:"item.title"}}),t._v(" "),s("div",{staticClass:"content"},[s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.message,callback:function(s){t.$set(e,"message",s)},expression:"item.message"}})],1),t._v(" "),s("div",{staticClass:"bom"},[s("div",{staticClass:"select"},[s("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.cateId,callback:function(e){t.cateId=e},expression:"cateId"}},t._l(t.sortList,(function(e){return s("el-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),s("div",{staticClass:"btns-box"},[s("el-button",{on:{click:function(t){t.stopPropagation(),e.isEdit=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(s){return s.stopPropagation(),t.updataMsg(e)}}},[t._v("保存")])],1)])],1):s("div",{staticClass:"box1"},[s("div",{staticClass:"txt-box",on:{click:function(s){return t.bindRadio(e)}}},[e.title?s("span",{staticClass:"title"},[t._v(t._s(t._f("filtersTitle")(e.title)))]):t._e(),t._v(" "),e.message?s("span",[t._v(t._s(t._f("filtersCon")(e.message)))]):t._e()]),t._v(" "),t.tabCur?s("div",{staticClass:"edit-box"},[s("span",{staticClass:"iconfont iconbianji",on:{click:function(s){return s.stopPropagation(),t.editMsg(e)}}}),t._v(" "),s("span",{staticClass:"iconfont iconshanchu",on:{click:function(s){return s.stopPropagation(),t.delMsg(e,"删除话术",i)}}})]):t._e()])]):t._e()}))],2)],1)])]),t._v(" "),s("el-dialog",{staticClass:"class-box",attrs:{visible:t.isAddSort,title:t.maskTitle,width:"304px","append-to-body":!0,modal:!1,"footer-hide":!0},on:{"update:visible":function(e){t.isAddSort=e}}},[s("div",{staticClass:"item"},[s("span",[t._v("分组名称：")]),t._v(" "),s("el-input",{attrs:{size:"small",placeholder:"分组名称"},model:{value:t.classTitle,callback:function(e){t.classTitle=e},expression:"classTitle"}})],1),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("分组排序：")]),t._v(" "),s("el-input",{attrs:{size:"small",placeholder:"输入排序"},model:{value:t.classSort,callback:function(e){t.classSort=e},expression:"classSort"}})],1),t._v(" "),s("div",{staticClass:"btn"},[s("el-button",{staticStyle:{background:"#1890ff",width:"100%"},attrs:{type:"primary"},on:{click:t.addServiceCate}},[t._v("确定")])],1)])],1)])},U=[],G=(s("7f7f"),s("55dd"),{name:"MsgWindow",filters:{filtersTitle:function(t){var e=37;if(t.length>e){var s=t.substring(0,e);return"".concat(s,"...")}return t},filtersCon:function(t){var e=113;if(t.length>e){var s=t.substring(0,e);return"".concat(s,"...")}return t}},data:function(){return{ops:{vuescroll:{mode:"native",enable:!1,tips:{deactive:"Push to Load",active:"Release to Load",start:"Loading...",beforeDeactive:"Load Successfully!"},auto:!1,autoLoadDistance:0,pullRefresh:{enable:!1},pushLoad:{enable:!1,auto:!0,autoLoadDistance:10}},bar:{background:"#393232",opacity:".5",size:"2px"}},isScroll:!0,page:1,limit:10,tabCur:1,tabList:[{title:"个人库",key:1},{title:"公共库",key:0}],searchTxt:"",list:[{isEdit:!1}],model1:"",msgTitle:"",sortList:[],cateId:"",addMsg:{title:"",message:"",cateId:"",isEdit:!1},isAddSort:!1,classTitle:"",classSort:"",maskTitle:"",editObj:{},dialogVisible:!1}},mounted:function(){},methods:{editMsg:function(t){t.isEdit=!0,this.cateId=t.cate_id},handleClose:function(){this.dialogVisible=!1},openBox:function(){this.dialogVisible=!0},bindEdit:function(t,e){t.isEdit=!t.isEdit},bindTab:function(t){this.tabCur=t.key,this.cateId="",this.sortList=[],this.isScroll=!0,this.page=1,this.list=[],this.serviceCate()},bindSearch:function(){this.isScroll=!0,this.page=1,this.list=[],this.getList()},selectSort:function(t){this.cateId!=t.id&&(this.sortList.forEach((function(e,s){e.id!=t.id&&(e.isEdit=!1)})),this.cateId=t.id,this.isScroll=!0,this.page=1,this.list=[],this.getList())},delSort:function(t,e,s){var i=this,a={title:e,num:s,url:"/service/cate/".concat(t.id),method:"DELETE",ids:"",kefu:!0};this.$modalSure(a).then((function(t){i.$Message.success(t.msg),i.isScroll=!0,i.page=1,i.list=[],i.cateId="",i.serviceCate()})).catch((function(t){i.$Message.error(t.msg)}))},serviceCate:function(){var t=this;Object(l["serviceCate"])({type:this.tabCur}).then((function(e){e.data.data.forEach((function(t,e){t.isEdit=!1})),t.sortList=e.data.data,""===t.cateId&&(t.cateId=e.data.data[0].id),t.getList()}))},getList:function(){var t=this;this.isScroll&&Object(l["speeChcraft"])({page:this.page,limit:this.limit,title:this.searchTxt,cate_id:this.cateId,type:this.tabCur}).then((function(e){t.isScroll=e.data.length>=t.limit,e.data.forEach((function(t,e){t.isEdit=!1})),t.page++,t.list=t.list.concat(e.data)}))},updataMsg:function(t){var e=this;Object(l["serviceCateUpdate"])(t.id,{title:t.title,cate_id:this.cateId,message:t.message}).then((function(s){e.$Message.success("修改成功"),t.isEdit=!1})).catch((function(s){e.$Message.error(s.msg),t.isEdit=!0}))},bindFocus:function(){this.list.forEach((function(t,e){t.isEdit=!1})),this.addMsg.isEdit=!0},openAddSort:function(){this.isAddSort=!0,this.maskTitle="添加分组",this.editObj.id=0},bindAdd:function(){var t=this;Object(l["addSpeeChcraft"])({title:this.addMsg.title,cate_id:this.addMsg.cateId,message:this.addMsg.message}).then((function(e){t.addMsg.title="",t.addMsg.message="",t.addMsg.cateId="",t.addMsg.isEdit=!1,t.$Message.success(e.msg),e.data.isEdit=!1,t.page=1,t.list=[],t.isScroll=!0,t.serviceCate()})).catch((function(e){t.$Message.error(e.msg)}))},delMsg:function(t,e,s,i){var a=this,n={title:e,num:s,url:"service/speechcraft/".concat(t.id),method:"DELETE",ids:"",kefu:!0};this.$modalSure(n).then((function(t){a.$Message.success(t.msg),a.list.splice(s,1)})).catch((function(t){a.$Message.error(t.msg)}))},addServiceCate:function(){var t=this;this.editObj.id?Object(l["editServiceCate"])(this.editObj.id,{name:this.classTitle,sort:this.classSort}).then((function(e){t.classTitle="",t.classSort="",t.$Message.success(e.msg),t.isAddSort=!1,t.page=1,t.list=[],t.isScroll=!0,t.serviceCate()})).catch((function(e){t.classTitle="",t.classSort="",t.$Message.error(res.msg)})):Object(l["addServiceCate"])({name:this.classTitle,sort:this.classSort}).then((function(e){t.classTitle="",t.classSort="",t.$Message.success(e.msg),t.isAddSort=!1,t.page=1,t.list=[],t.isScroll=!0,t.serviceCate()})).catch((function(e){t.classTitle="",t.classSort="",t.$Message.error(res.msg)}))},editSort:function(t){this.classSort=t.sort,this.classTitle=t.name,this.isAddSort=!0,this.maskTitle="编辑分组",this.editObj=t},handleReachBottom:function(){this.getList()},bindRadio:function(t){this.$emit("activeTxt",t.message)}}}),J=G,q=(s("6371"),s("21b5"),Object(_["a"])(J,R,U,!1,null,"af82a944",null)),Q=q.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"订单详情",visible:t.dialogVisible,width:"700px","show-close":!0,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.orderDetail?s("div",{staticClass:"order_detail"},[s("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[s("div",{staticClass:"box-title"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"msg-wrapper"},[s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("订单编号：")]),t._v(t._s(t.orderDetail.order_sn)+"\n            ")]),t._v(" "),s("div",{staticClass:"item",staticStyle:{color:"red"}},[0===t.orderDetail.order_type?s("span",{staticStyle:{color:"red"}},[t._v("订单状态："+t._s(t._f("orderStatusFilter")(t.orderDetail.status)))]):s("span",{staticStyle:{color:"red"}},[t._v("订单状态："+t._s(t._f("cancelOrderStatusFilter")(t.orderDetail.status)))])])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("商品数量：")]),t._v(t._s(t.orderDetail.total_num)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("商品总价：")]),t._v(t._s(t.orderDetail.total_price)+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("优惠券金额：")]),t._v(t._s(t.orderDetail.coupon_price)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("交付邮费：")]),t._v(t._s(t.orderDetail.pay_postage)+"\n            ")])]),t._v(" "),t.orderDetail.integral>0?s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("抵扣积分：")]),t._v(t._s(t.orderDetail.integral)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("积分抵扣金额：")]),t._v(t._s(t.orderDetail.integral_price)+"\n            ")])]):t._e(),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("实际支付：")]),t._v(t._s(t.orderDetail.finalOrder?parseFloat(t.orderDetail.finalOrder.pay_price)+parseFloat(t.orderDetail.pay_price):t.orderDetail.pay_price)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("支付方式：")]),t._v(t._s(t._f("payTypeFilter")(t.orderDetail.pay_type))+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("创建时间：")]),t._v(t._s(t.orderDetail.create_time)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("推广人：")]),t._v("--\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("一级佣金：")]),t._v(t._s(parseFloat(t.orderDetail.extension_one))+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("二级佣金：")]),t._v(t._s(parseFloat(t.orderDetail.extension_two))+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("订单类型：")]),t._v(t._s(2==t.orderDetail.order_type?"虚拟订单":1==t.orderDetail.order_type?"核销订单":"普通订单")+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("活动类型：")]),t._v(t._s(t._f("activityTypeFilter")(t.orderDetail.activity_type))+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("买家备注：")]),t._v(t._s(t.orderDetail.mark||"--")+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("商家备注：")]),t._v(t._s(t.orderDetail.remark||"--")+"\n            ")])])])]),t._v(" "),s("div",{staticClass:"goods-box"},[s("el-table",{attrs:{data:t.orderList,size:"mini"}},[s("el-table-column",{attrs:{prop:"product_id",label:"商品ID","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"productInfo",label:"商品名称","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"product_info"},[s("img",{attrs:{src:e.row.cart_info.productAttr.image,alt:""}}),t._v(" "),s("p",[t._v(t._s(e.row.cart_info.product.store_name))])])]}}],null,!1,1669425646)}),t._v(" "),s("el-table-column",{attrs:{prop:"product_price",label:"商品售价","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"product_num",label:"商品数量","min-width":"80"}})],1)],1),t._v(" "),"1"===t.orderDetail.delivery_type||"4"===t.orderDetail.delivery_type?s("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[s("div",{staticClass:"box-title"},[t._v("物流信息")]),t._v(" "),s("div",{staticClass:"msg-wrapper"},[s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[t._v("快递公司："+t._s(t.orderDetail.delivery_name))]),t._v(" "),s("div",{staticClass:"item"},[t._v("快递单号："+t._s(t.orderDetail.delivery_id)+"\n                "),s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:t.openLogistics}},[t._v("物流查询")])],1)])])]):t._e(),t._v(" "),"2"===t.orderDetail.delivery_type?s("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[s("div",{staticClass:"box-title"},[t._v("配送信息")]),t._v(" "),s("div",{staticClass:"msg-wrapper"},[s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[t._v("送货人姓名："+t._s(t.orderDetail.delivery_name))]),t._v(" "),s("div",{staticClass:"item"},[t._v("送货人姓名："+t._s(t.orderDetail.delivery_name))])])])]):t._e()]):t._e()]),t._v(" "),s("el-dialog",{attrs:{title:"物流查询",visible:t.dialogLogistics,width:"350px","before-close":t.close},on:{"update:visible":function(e){t.dialogLogistics=e}}},[t.orderDetail?s("logistics-from",{attrs:{"order-detail":t.orderDetail,result:t.result}}):t._e()],1)],1)},K=[],X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"logistics acea-row row-top"},[t._m(0),t._v(" "),s("div",{staticClass:"logistics_cent"},[s("span",[t._v("物流公司："+t._s(t.logisticsName?t.orderDetail.delivery_type:t.orderDetail.delivery_name))]),t._v(" "),s("span",[t._v("物流单号："+t._s(t.orderDetail.delivery_id))])])]),t._v(" "),s("div",{staticClass:"acea-row row-column-around trees-coadd"},[s("div",{staticClass:"scollhide"},[s("el-timeline",t._l(t.result,(function(e,i){return s("el-timeline-item",{key:i},[s("p",{staticClass:"time",domProps:{textContent:t._s(e.time)}}),t._v(" "),s("p",{staticClass:"content",domProps:{textContent:t._s(e.status)}})])})),1)],1)])])},tt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logistics_img"},[i("img",{attrs:{src:s("bd9b")}})])}],et={name:"Logistics",props:{orderDetail:{type:Object,default:null},result:{type:Array,default:function(){return[]}},logisticsName:{type:String,default:""}}},st=et,it=(s("67cd"),Object(_["a"])(st,X,tt,!1,null,"ccb6ad70",null)),at=it.exports,nt={name:"OrderDetail",components:{logisticsFrom:at},data:function(){return{dialogLogistics:!1,orderDetail:{},result:{},orderList:[],dialogVisible:!1}},mounted:function(){},methods:{openBox:function(t){this.dialogVisible=!0,this.getOrderInfo(t)},handleClose:function(){this.dialogVisible=!1},getOrderInfo:function(t){var e=this;Object(l["m"])(t).then((function(t){e.orderDetail=t.data,e.orderList=t.data.orderProduct}))},openLogistics:function(){this.getOrderData(),this.dialogLogistics=!0},close:function(){this.dialogLogistics=!1},getOrderData:function(){var t=this;Object(l["h"])(this.orderDetail.order_id).then(function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(s){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.result=s.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.message)}))}}},rt=nt,ot=(s("8841"),Object(_["a"])(rt,Z,K,!1,null,"72cd2a05",null)),ct=ot.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"退款单详情",visible:t.dialogVisible,width:"700px","show-close":!0,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.orderDetail?s("div",{staticClass:"order_detail"},[s("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[s("div",{staticClass:"box-title"},[t._v("用户信息")]),t._v(" "),s("div",{staticClass:"msg-wrapper"},[s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("用户昵称：")]),t._v(t._s(t.orderDetail.user&&t.orderDetail.user.nickname)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("退货人：")]),t._v(t._s(t.orderDetail.order&&t.orderDetail.order.real_name)+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("联系电话：")]),t._v(t._s(t.orderDetail.order&&t.orderDetail.order.user_phone)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("退货地址：")]),t._v(t._s(t.orderDetail.order&&t.orderDetail.order.user_address)+"\n            ")])])])]),t._v(" "),s("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[s("div",{staticClass:"box-title"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"msg-wrapper"},[s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("订单编号：")]),t._v(t._s(t.orderDetail.order&&t.orderDetail.order.order_sn)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("订单状态：")]),t._v(t._s(t._f("orderRefundFilter")(t.orderDetail.status))+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("退款单号：")]),t._v(t._s(t.orderDetail.refund_order_sn)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("退款商品名称：")]),t._v(" "),s("span",{staticClass:"product_name"},t._l(t.orderDetail.refundProduct,(function(e,i){return s("span",{key:i},[e.product&&e.product.cart_info&&e.product.cart_info.product?s("span",[t._v(t._s(e.product.cart_info.product.store_name))]):t._e()])})),0)])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("退款商品件数：")]),t._v(t._s(t.orderDetail.refund_num)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("退款总金额：")]),t._v(t._s(t.orderDetail.refund_price)+"\n            ")])]),t._v(" "),s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[s("span",[t._v("创建时间：")]),t._v(t._s(t.orderDetail.create_time)+"\n            ")]),t._v(" "),s("div",{staticClass:"item"},[s("span",[t._v("商家备注：")]),t._v(t._s(t.orderDetail.mer_mark)+"\n            ")])])])]),t._v(" "),s("div",{staticClass:"goods-box"},[s("el-table",{attrs:{data:t.tableDataLog.data,size:"mini"}},[s("el-table-column",{attrs:{prop:"refund_order_id",align:"center",label:"退款单ID","min-width":"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"change_message",label:"操作记录",align:"center","min-width":"280"}}),t._v(" "),s("el-table-column",{attrs:{prop:"change_time",label:"操作时间",align:"center","min-width":"280"}})],1)],1),t._v(" "),2!=t.orderDetail.status&&3!=t.orderDetail.status||2!=t.orderDetail.refund_type?t._e():s("div",{staticClass:"msg-box",staticStyle:{border:"none"}},[s("div",{staticClass:"box-title"},[t._v("物流信息")]),t._v(" "),s("div",{staticClass:"msg-wrapper"},[s("div",{staticClass:"msg-item"},[s("div",{staticClass:"item"},[t._v("快递公司："+t._s(t.orderDetail.delivery_name))]),t._v(" "),s("div",{staticClass:"item"},[t._v("快递单号："+t._s(t.orderDetail.delivery_id)+"\n                "),s("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:t.openLogistics}},[t._v("物流查询")])],1)])])])]):t._e()]),t._v(" "),s("el-dialog",{attrs:{title:"物流查询",visible:t.dialogLogistics,width:"350px","before-close":t.close},on:{"update:visible":function(e){t.dialogLogistics=e}}},[t.orderDetail?s("logistics-from",{attrs:{"order-detail":t.orderDetail,result:t.result}}):t._e()],1)],1)},dt=[],ut={name:"RefundOrderDetail",components:{logisticsFrom:at},data:function(){return{dialogLogistics:!1,orderDetail:{},result:{},dialogVisible:!1,LogLoading:!1,tableFromLog:{page:1,limit:10},tableDataLog:{data:[],total:0}}},mounted:function(){},methods:{openBox:function(t){this.dialogVisible=!0,this.getOrderInfo(t)},handleClose:function(){this.dialogVisible=!1},getOrderInfo:function(t){var e=this;Object(l["p"])(t).then((function(t){e.orderDetail=t.data}))},onOrderLog:function(t){var e=this;this.LogLoading=!0,this.order_id=t,Object(l["r"])(t,this.tableFromLog).then((function(t){e.tableDataLog.data=t.data.list,e.tableDataLog.total=t.data.count,e.LogLoading=!1})).catch((function(t){e.$message.error(t.message),e.LogLoading=!1}))},openLogistics:function(){this.getOrderData(),this.dialogLogistics=!0},close:function(){this.dialogLogistics=!1},getOrderData:function(){var t=this;Object(l["q"])(this.orderDetail.refund_order_id).then(function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(s){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.result=s.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$message.error(e.message)}))}}},vt=ut,mt=(s("5dc8"),Object(_["a"])(vt,lt,dt,!1,null,"42bcc57e",null)),ht=mt.exports,_t=s("5f87"),ft=s("bbcc"),pt=(s("a481"),function(t){this.ws=new WebSocket(gt(t)),this.ws.onopen=this.onOpen.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this)});function gt(t){t=t.replace("https:","wss:"),t=t.replace("http:","ws:");var e="https:"===document.location.protocol;return e?t.replace("ws:","wss:"):t.replace("wss:","ws:")}pt.prototype={vm:function(t){this.vm=t},close:function(){clearInterval(this.timer),this.ws.close()},onOpen:function(){this.init(),this.vm.$emit("socket_open")},init:function(){var t=this;this.loaded=!0,this.timer=setInterval((function(){t.send({type:"ping"})}),1e4)},onLoad:function(t){this.loaded?t():this.vm.$once("socket_open",t)},send:function(t){return this.ws.send(JSON.stringify(t))},onMessage:function(t){var e=JSON.parse(t.data),s=e.type,i=e.data,a=void 0===i?{}:i;this.vm.$emit(s,a)},onClose:function(){clearInterval(this.timer),this.vm.$emit("socket_close")},onError:function(t){this.vm.$emit("socket-error",t)}},pt.prototype.constructor=pt;var Ct=pt,bt=s("5c96"),yt=s("16b0"),wt=function(t,e){e=1*e||1;var s=[];return t.forEach((function(t,i){i%e===0&&s.push([]),s[s.length-1].push(t)})),s},xt={name:"PCList",components:{baseHeader:p,chatList:$,goodsDetail:B,orderDetail:ct,refundOrderDetail:ht,msgWindow:Q,rightMenu:Y},data:function(){return{mp3:new Audio(yt),active:null,isEmoji:!1,chatCon:"",emojiGroup:wt(A,20),emojiList:A,userActive:{},kefuInfo:{},chatList:[],page:1,limit:20,loaded:!1,loading:!1,online:!0,goodsId:"",isOrder:!1,isOnline:!1,closed:!1,orderId:"",upload:"",header:{},uploadData:{filename:"file"},tourist:0,socket:null,press:!1,merchant:{}}},mounted:function(){var t=this;this.upload=ft["a"].https+"/upload/file",this.header["X-Token"]=Object(_t["a"])(),this.createSocket(),this.merchant=JSON.parse(v.a.get("ServiceInfo")),this.$on("socket_open",(function(){t.isOnline=!0,t.active&&t.socket.send({data:{mer_id:t.active.mer_id,uid:t.active.uid},type:"service_chat_start"})})),this.$on(["reply","chat","send_chat"],(function(e){if(e.longpress=!1,t.chatList.length>0&&t.chatList[t.chatList.length-1]["children"].length>0){var s=t.chatList[t.chatList.length-1]["children"].length-1,i=t.chatList[t.chatList.length-1]["children"][s];e.send_time-i.send_time>300?t.chatList.push({time:e.create_time,children:[e]}):t.chatList[t.chatList.length-1]["children"].push(e)}else t.chatList.push({time:e.create_time,children:[e]});t.active&&e.uid===t.active.uid&&(t.active.last=e);var a=t.$refs.chatList.userList.indexOf(t.active);t.$refs.chatList.userList.splice(a,1),t.$refs.chatList.userList.unshift(t.active),t.deleteMsg(e),t.$nextTick((function(){t.$refs.scrollBox.scrollTop=t.$refs.scrollBox.scrollHeight-t.$refs.scrollBox.clientHeight}))})),this.$on("back_chat",(function(e){t.mp3.play(),t.$refs.chatList.updateChatList()})),this.$on(["socket_error","socket_close"],(function(){!t.closed&&t.isOnline?bt["MessageBox"].confirm("连接失败,是否重新连接？","提示").then((function(e){t.createSocket()})):t.isOnline=!1})),this.$on("err_tip",(function(e){t.$message.error(e)}))},methods:{onBeforeUpload:function(){return this.active?!this.isOnline||this.closed?(this.$message.error("已离线,发送失败"),!1):void 0:(this.$message.error("请选择发送用户"),!1)},chatKeydown:function(t){13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),t.ctrlKey?this.chatCon+="\n":this.chatCon&&this.sendText())},createSocket:function(){var t="".concat(ft["a"].wsSocketUrl,"?type=ser&token=")+Object(_t["a"])();this.socket=new Ct(t),this.socket.vm(this)},changeOnline:function(t){this.isOnline=t,t?this.createSocket():(this.socket.send({data:{},type:"service_chat_end"}),this.socket.close())},showReverst:function(t){t.longpress=!0,this.press=!0},reverstMsg:function(t){this.socket.send({data:{msn:t.service_log_id,msn_type:100,mer_id:this.active.mer_id,uid:this.active.uid},type:"service_chat"}),setTimeout((function(){t.longpress=!1}),300)},deleteMsg:function(t){var e=this;e.chatList.forEach((function(e,s){e.children.forEach((function(s,i){100==t.msn_type&&t.msn==s.service_log_id&&e.children.splice(i,1)}))}))},roomClick:function(t){!this.isEmoji||t.target.classList.contains("emoji-box")||t.target.classList.contains("emoji-item")||t.target.classList.contains("em")||(this.isEmoji=!1)},activeUser:function(t){var e=this;this.active=t,this.chatList=[],document.title="正在和".concat(t.user.nickname,"对话中"),this.page=1,this.loading=!1,this.loaded=!1,this.socket.onLoad((function(){e.socket.send({data:{mer_id:t.mer_id,uid:t.uid},type:"service_chat_start"})})),this.getChatList()},handleFormatError:function(t){this.$message.error("上传图片只能是 jpg、jpg、jpeg、gif 格式!")},getChatList:function(){var t=this;if(!this.loaded&&!this.loading&&this.active){this.loading=!0;var e="";this.chatList.length&&(e=this.chatList[0].service_log_id),Object(l["i"])(this.active.uid,{page:this.page,limit:this.limit,last_id:e}).then((function(s){var i=s.data.list,a=t.getChatTime(i),n=[];for(var r in a){var o=r,c={};c.time=o,a[r].forEach((function(t,e){t.longpress=!1})),c.children=a[r],n.push(c)}t.chatList=n.concat(t.chatList),t.page++,setTimeout((function(){t.loading=!1,t.loaded=i.length<t.limit}),500),2===t.page?t.$nextTick((function(){t.$refs.scrollBox.scrollTop=t.$refs.scrollBox.scrollHeight-t.$refs.scrollBox.clientHeight})):e&&t.$nextTick((function(){document.getElementById("chat_"+e).scrollIntoView()}))}))}},getChatTime:function(t){for(var e={},s="",i=0;i<t.length;i++)if(0==i){var a=t[i]["create_time"];e[a]=[t[i]],s=a}else if(t[i]["send_time"]-t[i-1]["send_time"]<=300)e[s].push(t[i]);else{var n=t[i]["create_time"];s=n,e[n]?e[s].push(t[i]):e[n]=[t[i]]}return e},scrollHandler:function(t){t.target.scrollTop<=150&&this.active&&this.getChatList()},bindPush:function(t){this.sendMsg(t,5)},lookGoods:function(t){this.$refs.goodsDetail.openBox(t)},lookOrder:function(t){this.$refs.orderDetail.openBox(t.orderInfo.order_id)},lookRefundOrder:function(t){this.$refs.refundOrderDetail.openBox(t.refundOrder.refund_order_id),this.$refs.refundOrderDetail.onOrderLog(t.refundOrder.refund_order_id)},handleSuccess:function(t){200===t.status?this.sendMsg(t.data.src,3):this.$message.error(t.msg)},select:function(t){this.sendMsg(t,2),this.isEmoji=!1},sendText:function(){var t=this.chatCon.trim();if(!t)return this.$message.error("请输入消息");this.sendMsg(t,1),this.chatCon=""},sendMsg:function(t,e){return this.active?!this.isOnline||this.closed?this.$message.error("已离线,发送失败"):void this.socket.send({data:{msn:t,msn_type:e,mer_id:this.active.mer_id,uid:this.active.uid},type:"service_chat"}):(this.$message.error("请选择发送用户"),!1)},handleMsg:function(){this.$refs.msgWindow.openBox()}}},Dt=xt,kt=(s("605d"),Object(_["a"])(Dt,i,a,!1,null,"fa3fd278",null));e["default"]=kt.exports},c8db:function(t,e,s){},d6c7:function(t,e,s){"use strict";s("0bb3")},ea87:function(t,e,s){t.exports=s.p+"kefu/img/no_zf.e61fe9b5.png"},ed5e:function(t,e,s){},ed97:function(t,e,s){"use strict";s("ff1d")},ef44:function(t,e,s){"use strict";s("18c2")},ff1d:function(t,e,s){}}]);