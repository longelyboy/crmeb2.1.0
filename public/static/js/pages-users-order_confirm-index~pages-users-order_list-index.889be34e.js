(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-users-order_confirm-index~pages-users-order_list-index"],{"02a0":function(e,t,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("d401"),i("d3b7"),i("25f0"),i("7db0"),i("ac1f"),i("00b4");var n=a(i("5530")),o=i("c6c3"),r=i("26cb"),s={props:{invoice:{type:Object,default:function(){return{invoice:!1,mer_id:0}}}},computed:(0,n.default)({},(0,r.mapGetters)(["viewColor"])),data:function(){return{id:"",receipt_title_type:"1",receipt_type:"1",drawer_phone:"",receipt_title:"",duty_paragraph:"",tel:"",address:"",bank_name:"",bank_code:"",is_default:0,email:"",isDefault:[],typeName:"增值税电子普通发票",popupType:!1,popupTitle:!1,invoiceTypeList:[{type:"1",name:"增值税电子普通发票",info:"默认发送至所提供的电子邮件"},{type:"2",name:"增值税专用发票",info:"纸质发票开出后将以邮寄形式交付"}],special_invoice:!0,invoice_func:!0,invoiceList:[],invoice_checked:"",invoice_id:"",order_id:"",news:"",cartId:"",pinkId:"",couponId:"",addressId:"",invoiceData:{},formvalidate:!1}},watch:{},onLoad:function(e){this.news=e.news,this.cartId=e.cartId,this.pinkId=e.pinkId,this.couponId=e.couponId,this.addressId=e.addressId,"false"==e.special_invoice&&this.$set(this,"special_invoice",!1)},onShow:function(){this.getInvoiceDefault(),this.popupTitle=!1},methods:{getInvoiceList:function(){var e=this;(0,o.invoice)().then((function(t){for(var i=0;i<t.data.length;i++)t.data[i].user_receipt_id=t.data[i].user_receipt_id.toString(),t.data[i].is_default&&(e.invoice_id=t.data[i].user_receipt_id);e.$set(e,"invoiceList",t.data)})).catch((function(t){e.$util.Tips({title:t})}))},getInvoiceDefault:function(){var e=this;(0,o.invoice)({is_default:1}).then((function(t){var i=t.data[0];e.typeName="1"==i.receipt_type?"增值税电子普通发票":"增值税专用发票",e.receipt_title_type=i.receipt_title_type,e.receipt_type=i.receipt_type,e.receipt_title=i.receipt_title,e.email=i.email,e.duty_paragraph=i.duty_paragraph,e.bank_name=i.bank_name,e.bank_code=i.bank_code,e.address=i.address,e.tel=i.tel,e.invoice_id=i.user_receipt_id.toString()})).catch((function(e){}))},getInvoiceDetail:function(e){var t=this;(0,o.invoiceDetail)(e).then((function(e){uni.hideLoading(),t.receipt_title_type=e.data.receipt_title_type,t.receipt_type=e.data.receipt_type,t.typeName="1"==t.receipt_type?"增值税电子普通发票":"增值税专用发票",t.receipt_title=e.data.receipt_title,t.email=e.data.email,t.duty_paragraph=e.data.duty_paragraph,t.bank_name=e.data.bank_name,t.bank_code=e.data.bank_code,t.address=e.data.address,t.tel=e.data.tel,t.is_default=e.data.is_default})).catch((function(e){uni.hideLoading(),t.$util.Tips({title:e})}))},close:function(){this.formvalidate?this.$emit("changeInvoiceClose",this.invoiceData):this.$emit("changeInvoiceClose","")},noInvoice:function(){uni.setStorage({key:"invoice_Data",data:{},success:function(){}}),this.$emit("changeInvoiceClose","")},callType:function(){this.popupType=!0},changeType:function(e){var t=this;this.receipt_type=e.detail.value,this.typeName=this.invoiceTypeList.find((function(e){return e.type==t.receipt_type})).name},closeType:function(){this.popupType=!1},callTitle:function(){this.popupTitle=!0},changeTitle:function(e){this.invoice_id=e.detail.value.toString(),this.getInvoiceDetail(e.detail.value),this.popupTitle=!1},addTitle:function(){this.popupType=!1,this.popupTitle=!1,uni.navigateTo({url:"/pages/users/user_invoice_form/index?mer_id="+this.invoice.mer_id})},closeTitle:function(){this.popupTitle=!1},changeHeader:function(e){this.receipt_title_type=e.detail.value,1==e.detail.value&&(this.receipt_type=1,this.typeName="增值税电子普通发票"),this.receipt_type},changeDefault:function(e){this.is_default=e.detail.value.length?1:0},formSubmit:function(e){var t=e.detail.value;if(!t.receipt_title_type)return this.$util.Tips({title:"请填写发票抬头"});if(!t.email)return this.$util.Tips({title:"请填写邮箱"});if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t.email))return this.$util.Tips({title:"请输入正确的邮箱"});if(2==t.receipt_title_type){if(!t.duty_paragraph)return this.$util.Tips({title:"请填写税号"});if("增值税专用发票"==t.receipt_type){if(!t.bank_name)return this.$util.Tips({title:"请填写开户行"});if(!t.bank_code)return this.$util.Tips({title:"请填写银行账号"});if(!t.address)return this.$util.Tips({title:"请填写企业地址"});if(!t.tel)return this.$util.Tips({title:"请填写企业电话"});if(!/^(\d{9}|\d{14}|\d{18})$/.test(t.bank_code))return this.$util.Tips({title:"请输入正确的银行账号"});if(!/(^(\d{3,4})?\d{7,8})$|(13[0-9]{9})/.test(t.tel))return this.$util.Tips({title:"请输入正确的电话号码"})}}this.formvalidate=!0,t.mer_id=this.invoice.mer_id,t.receipt_type=this.receipt_type,this.invoiceData=t,uni.setStorage({key:"invoice_Data",data:[this.invoiceData],success:function(){}}),this.$emit("changeInvoiceClose",this.invoiceData)}}};t.default=s},"105b":function(e,t,i){"use strict";var a=i("b993"),n=i.n(a);n.a},4673:function(e,t,i){"use strict";i.r(t);var a=i("02a0"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"4d01":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.add_invoicing[data-v-2a75223e]{position:fixed;bottom:0;width:100%;left:0;background-color:#fff;z-index:77;border-radius:%?16?% %?16?% 0 0;padding-bottom:%?20?%;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);transition:all .3s cubic-bezier(.25,.5,.5,.9)}.add_invoicing.on[data-v-2a75223e]{-webkit-transform:translateZ(0);transform:translateZ(0)}.add_invoicing .title[data-v-2a75223e]{font-size:%?32?%;font-weight:700;text-align:center;height:%?123?%;line-height:%?123?%;position:relative}.add_invoicing .title .iconfont[data-v-2a75223e]{position:absolute;right:%?30?%;color:#8a8a8a;font-size:%?35?%}uni-form[data-v-2a75223e]{font-size:%?28?%;color:#282828}uni-form uni-input[data-v-2a75223e], uni-form uni-radio-group[data-v-2a75223e]{flex:1;text-align:right}uni-form uni-input[data-v-2a75223e]{font-size:%?26?%}uni-form uni-label[data-v-2a75223e]{margin-right:%?50?%}uni-form uni-radio[data-v-2a75223e]{margin-right:%?8?%}uni-form uni-checkbox-group[data-v-2a75223e]{height:%?90?%}uni-form uni-checkbox[data-v-2a75223e]{margin-right:%?20?%}[data-v-2a75223e] uni-radio .uni-radio-input.uni-radio-input-checked{border:1px solid var(--view-theme)!important;background-color:var(--view-theme)!important}uni-form uni-button[data-v-2a75223e]{height:%?76?%;border-radius:%?38?%;margin:%?16?% %?30?%;background-color:var(--view-theme);font-size:%?30?%;line-height:%?76?%;color:#fff}.panel[data-v-2a75223e]{padding-right:%?30?%;padding-left:%?30?%;background-color:#fff}.panel ~ .panel[data-v-2a75223e]{margin-top:%?14?%}.panel .acea-row[data-v-2a75223e]{height:%?90?%}.panel .acea-row ~ .acea-row[data-v-2a75223e]{border-top:1px solid #eee}.input-placeholder[data-v-2a75223e]{font-size:%?26?%;color:#bbb}.icon-xiangyou[data-v-2a75223e]{margin-left:%?25?%;font-size:%?18?%;color:#bfbfbf}.btn-wrap[data-v-2a75223e]{width:100%;border-top:1px solid #f5f5f5}.btn-wrap .button[data-v-2a75223e]{height:%?86?%;line-height:%?86?%;border-radius:%?50?%}.btn-wrap .back[data-v-2a75223e]{border-radius:%?50?%;height:%?86?%;line-height:%?86?%;border:%?1?% solid var(--view-theme);background:none;color:var(--view-theme)}.popup[data-v-2a75223e]{position:fixed;bottom:0;left:0;z-index:99;width:100%;padding-bottom:%?100?%;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%;background-color:#f5f5f5;overflow:hidden;-webkit-transform:translateY(100%);transform:translateY(100%);transition:.3s}.popup.on[data-v-2a75223e]{-webkit-transform:translateY(0);transform:translateY(0)}.popup .title[data-v-2a75223e]{position:relative;height:%?137?%;font-size:%?32?%;line-height:%?137?%;text-align:center}.popup uni-scroll-view[data-v-2a75223e]{height:%?466?%;padding-right:%?30?%;padding-left:%?30?%;box-sizing:border-box}.popup uni-label[data-v-2a75223e]{padding:%?35?% %?30?%;border-radius:%?16?%;margin-bottom:%?20?%;background-color:#fff}.popup .text[data-v-2a75223e]{flex:1;min-width:0;font-size:%?28?%;color:#282828}.popup .info[data-v-2a75223e]{margin-top:%?10?%;font-size:%?22?%;color:#909090}.popup .icon-guanbi[data-v-2a75223e]{position:absolute;top:50%;right:%?30?%;z-index:2;-webkit-transform:translateY(-50%);transform:translateY(-50%);font-size:%?30?%;color:#707070;cursor:pointer}.popup uni-button[data-v-2a75223e]{height:%?86?%;border-radius:%?43?%;margin-right:%?30?%;margin-left:%?30?%;background-color:var(--view-theme);font-size:%?30?%;line-height:%?86?%;color:#fff}uni-button.btn-default[data-v-2a75223e]{background-color:initial;color:var(--view-theme);border:1px solid var(--view-theme)}.popup .text .acea-row[data-v-2a75223e]{display:inline-flex;max-width:100%}.popup .name[data-v-2a75223e]{flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?30?%}.popup .label[data-v-2a75223e]{width:%?70?%;height:%?28?%;border:1px solid #e93323;margin-left:%?18?%;font-size:%?16?%;line-height:%?26?%;text-align:center;color:#e93323}.popup .type[data-v-2a75223e]{width:%?124?%;height:%?42?%;margin-top:%?14?%;background-color:#fcf0e0;font-size:%?24?%;line-height:%?42?%;text-align:center;color:#d67300}.popup .type.special[data-v-2a75223e]{background-color:#fde9e7;color:#e93323}.nothing[data-v-2a75223e]{margin:%?50?% 0;text-align:center}.nothing uni-image[data-v-2a75223e], .nothing uni-image[data-v-2a75223e]{width:%?400?%;height:%?260?%}.nothing_text[data-v-2a75223e]{margin-top:%?20?%;color:#999}',""]),e.exports=t},"94a3":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{style:e.viewColor},[a("v-uni-view",{staticClass:"add_invoicing",class:1==e.invoice.invoice?"on":""},[a("v-uni-view",{staticClass:"title"},[e._v("选择发票"),a("v-uni-text",{staticClass:"iconfont icon-guanbi",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}})],1),a("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"panel"},["1"==e.receipt_title_type?a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("发票类型")]),a("v-uni-input",{attrs:{name:"receipt_type",value:e.typeName,disabled:"true"}})],1):e._e(),"2"==e.receipt_title_type?a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("发票类型")]),a("v-uni-input",{attrs:{name:"receipt_type",value:e.typeName,disabled:"true"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.callType.apply(void 0,arguments)}}}),a("v-uni-text",{staticClass:"iconfont icon-xiangyou"})],1):e._e(),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("抬头类型")]),a("v-uni-radio-group",{attrs:{name:"receipt_title_type"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeHeader.apply(void 0,arguments)}}},[a("v-uni-label",[a("v-uni-radio",{attrs:{value:"1",checked:"1"==e.receipt_title_type}}),a("v-uni-text",[e._v("个人")])],1),a("v-uni-label",[a("v-uni-radio",{attrs:{value:"2",checked:"2"==e.receipt_title_type}}),a("v-uni-text",[e._v("企业")])],1)],1)],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("发票抬头")]),a("v-uni-input",{attrs:{name:"receipt_title",value:e.receipt_title,maxlength:20,placeholder:"需要开具发票的企业名称"}}),a("v-uni-text",{staticClass:"iconfont icon-xiangyou",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.callTitle.apply(void 0,arguments)}}})],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"2"==e.receipt_title_type,expression:"receipt_title_type == '2'"}],staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("税号")]),a("v-uni-input",{attrs:{name:"duty_paragraph",value:e.duty_paragraph,placeholder:"纳税人识别号"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("邮箱")]),a("v-uni-input",{attrs:{name:"email",value:e.email,placeholder:"您的联系邮箱"}})],1)],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"2"==e.receipt_title_type&&"2"==e.receipt_type,expression:"receipt_title_type == '2' && receipt_type == '2'"}],staticClass:"panel"},[a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("开户银行")]),a("v-uni-input",{attrs:{name:"bank_name",value:e.bank_name,placeholder:"您的开户银行"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("银行账号")]),a("v-uni-input",{attrs:{name:"bank_code",value:e.bank_code,placeholder:"您的银行账号"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("企业地址")]),a("v-uni-input",{attrs:{name:"address",value:e.address,placeholder:"您所在的企业地址"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",[e._v("企业电话")]),a("v-uni-input",{attrs:{name:"tel",value:e.tel,placeholder:"您的企业电话"}})],1)],1),a("v-uni-view",{staticClass:"btn-wrap"},[a("v-uni-button",{staticClass:"button",attrs:{"form-type":"submit"}},[e._v("提交申请")]),a("v-uni-button",{staticClass:"back",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.noInvoice.apply(void 0,arguments)}}},[e._v("不开发票")])],1)],1),a("v-uni-view",{class:{mask:e.popupType||e.popupTitle}}),a("v-uni-view",{staticClass:"popup",class:{on:e.popupType}},[a("v-uni-view",{staticClass:"title"},[e._v("发票类型选择"),a("v-uni-text",{staticClass:"iconfont icon-guanbi",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeType.apply(void 0,arguments)}}})],1),a("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[a("v-uni-radio-group",{attrs:{name:"invoice-type"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeType.apply(void 0,arguments)}}},e._l(e.invoiceTypeList,(function(t){return a("v-uni-label",{key:t.type,staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"text"},[a("v-uni-view",[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"info"},[e._v(e._s(t.info))])],1),a("v-uni-radio",{attrs:{value:t.type,checked:e.receipt_type==t.type}})],1)})),1)],1),a("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeType.apply(void 0,arguments)}}},[e._v("确定")])],1),a("v-uni-view",{staticClass:"popup",class:{on:e.popupTitle}},[a("v-uni-view",{staticClass:"title"},[e._v("抬头选择"),a("v-uni-text",{staticClass:"iconfont icon-guanbi",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeTitle.apply(void 0,arguments)}}})],1),e.invoiceList.length>0?a("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[a("v-uni-radio-group",{attrs:{name:"invoice-title"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeTitle.apply(void 0,arguments)}}},[e._l(e.invoiceList,(function(t){return[a("v-uni-label",{key:t.user_receipt_id,staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"text"},[a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"name"},[e._v(e._s(t.receipt_title))]),t.is_default?a("v-uni-view",{staticClass:"label"},[e._v("默认")]):e._e()],1),a("v-uni-view",{staticClass:"type",class:{special:"2"==t.receipt_type}},[e._v(e._s(1==t.receipt_type?"普通发票":"专用发票"))])],1),a("v-uni-radio",{attrs:{value:t.user_receipt_id,checked:t.user_receipt_id==e.invoice_id}})],1)]}))],2)],1):a("v-uni-view",{staticClass:"nothing"},[a("v-uni-image",{attrs:{src:i("b723")}}),a("v-uni-view",{staticClass:"nothing_text"},[e._v("您还没有添加发票信息哟~")])],1),e.invoice.add?a("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addTitle.apply(void 0,arguments)}}},[e._v("添加新的抬头")]):a("v-uni-button",{staticClass:"btn-default",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[e._v("不开发票")])],1)],1),a("v-uni-view",{staticClass:"mask",attrs:{catchtouchmove:"true",hidden:0==e.invoice.invoice},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}})],1)},n=[]},a572:function(e,t,i){"use strict";i.r(t);var a=i("94a3"),n=i("4673");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("105b");var r=i("f0c5"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"2a75223e",null,!1,a["a"],void 0);t["default"]=s.exports},b723:function(e,t,i){e.exports=i.p+"static/img/noInvoice.10bd0fdf.png"},b993:function(e,t,i){var a=i("4d01");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("419bbdd1",a,!0,{sourceMap:!1,shadowMode:!1})}}]);