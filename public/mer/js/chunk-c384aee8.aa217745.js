(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c384aee8"],{"05b6":function(e,t,r){},"1aca":function(e,t,r){"use strict";r("9ddc")},"2e83":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("28a5");var i=r("8122"),a=r("e8ae"),n=r.n(a),s=r("21a6");function o(e,t,r,a,o,l){var c,d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],u=1,p=new n.a.Workbook,m=e.length;function _(e){var t=Array.isArray(e)?e[0]:e,r=Array.isArray(e)?e[1]:{};c=p.addWorksheet(t,r)}function h(e,t){if(!Object(i["isEmpty"])(e)){e=Array.isArray(e)?e:e.split(",");for(var r=0;r<e.length;r++){var a=c.getRow(r+1);a.getCell(1).value=e[r],a.height=30,a.font={bold:!0,size:20,vertAlign:"subscript"},a.alignment={vertical:"bottom",horizontal:"center"},a.outlineLevel=1,c.mergeCells(r+1,1,r+1,t),a.commit(),u++}}}function v(e){if(!Object(i["isEmpty"])(e)){for(var t=c.getRow(u),r=1;r<=e.length;r++)t.getCell(r).value=e[r-1];t.height=25,t.width=50,t.font={bold:!0,size:18,vertAlign:"subscript"},t.alignment={vertical:"bottom",horizontal:"center"},t.outlineLevel=1,t.commit(),u++}}function g(e){if(!Object(i["isEmpty"])(e))for(var t=0;t<e.length;t++){for(var r=u,a=c.getRow(u),n=!1,s=0,o=0,l=0,d=0;d<e[t].length;d++)Array.isArray(e[t][d])?(s=l,n=!0,b(e[t][d],l),l+=e[t][d][0].length,o=l):(a.getCell(k(l)).value=e[t][d],a.getCell(k(l)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.alignment={vertical:"middle",horizontal:"center"},l++);n&&y(r,u,s,o),a.height=25,a.commit(),u++}}function b(e,t){for(var r=e.length,i=r-1,a=0;a<e.length;a++){for(var n=c.getRow(u),s=0;s<e[a].length;s++)n.getCell(k(t+s)).value=e[a][s],n.getCell(k(t+s)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},n.alignment={vertical:"middle",horizontal:"center"};n.height=25,n.commit(),a<i&&u++}}function y(e,t,r,i){for(var a=0;a<m;a++)(a<r||a>i)&&c.mergeCells(k(a)+e+":"+k(a)+t)}function w(e){if(!Object(i["isEmpty"])(e))if(Array.isArray(e))for(var t=0;t<e.length;t++){var r=c.getRow(u);r.getCell(1).value=e[t],r.getCell(1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},r.alignment={vertical:"middle",horizontal:"left"},c.mergeCells("A"+u+":"+k(m-1)+u),u++}else{var a=c.getRow(u);a.getCell(1).value=e[f],a.getCell(1).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a.alignment={vertical:"middle",horizontal:"left"},c.mergeCells("A"+u+":"+k(m-1)+u)}}function k(e){if(e<26)return d[e];var t=e%26,r=Math.floor(e%26);return d[r]+d[t]}function C(e){e||(e=(new Date).getTime()),p.xlsx.writeBuffer().then((function(t){var r=new Blob([t],{type:"application/octet-stream"});s["saveAs"](r,e+".xlsx")}))}_(l),h(t,m),v(e),g(r),w(a),C(o)}},3379:function(e,t,r){"use strict";r("e932")},"3e72":function(e,t,r){},"53b5":function(e,t,r){"use strict";r("3e72")},6067:function(e,t,r){},"634a":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"divBox"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("div",{staticClass:"container"},[r("el-form",{attrs:{size:"small","label-width":"100px",inline:""}},[r("el-form-item",{staticStyle:{display:"block"},attrs:{label:"订单状态："}},[r("el-radio-group",{attrs:{type:"button"},on:{change:function(t){e.getList(1),e.getCardList()}},model:{value:e.tableFrom.status,callback:function(t){e.$set(e.tableFrom,"status",t)},expression:"tableFrom.status"}},[r("el-radio-button",{attrs:{label:""}},[e._v("全部 "+e._s(e.orderChartType.all))]),e._v(" "),r("el-radio-button",{attrs:{label:"1"}},[e._v("待付款 "+e._s(e.orderChartType.unpaid))]),e._v(" "),r("el-radio-button",{attrs:{label:"2"}},[e._v("待发货 "+e._s(e.orderChartType.unshipped))]),e._v(" "),r("el-radio-button",{attrs:{label:"3"}},[e._v("待收货 "+e._s(e.orderChartType.untake))]),e._v(" "),r("el-radio-button",{attrs:{label:"4"}},[e._v("待评价 "+e._s(e.orderChartType.unevaluate))]),e._v(" "),r("el-radio-button",{attrs:{label:"5"}},[e._v("交易完成 "+e._s(e.orderChartType.complete))]),e._v(" "),r("el-radio-button",{attrs:{label:"6"}},[e._v("已退款 "+e._s(e.orderChartType.refund))]),e._v(" "),r("el-radio-button",{attrs:{label:"7"}},[e._v("已删除 "+e._s(e.orderChartType.del))])],1)],1),e._v(" "),r("el-form-item",{staticClass:"width100",staticStyle:{display:"block"},attrs:{label:"时间选择："}},[r("el-radio-group",{staticClass:"mr20",attrs:{type:"button",size:"small"},on:{change:function(t){return e.selectChange(e.tableFrom.date)}},model:{value:e.tableFrom.date,callback:function(t){e.$set(e.tableFrom,"date",t)},expression:"tableFrom.date"}},e._l(e.fromList.fromTxt,(function(t,i){return r("el-radio-button",{key:i,attrs:{label:t.val}},[e._v(e._s(t.text))])})),1),e._v(" "),r("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy/MM/dd",format:"yyyy/MM/dd",size:"small",type:"daterange",placement:"bottom-end",placeholder:"自定义时间"},on:{change:e.onchangeTime},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:"timeVal"}})],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"width100",attrs:{label:"商品名称"}},[r("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入商品名称",size:"small"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList(1),e.getCardList()}},model:{value:e.tableFrom.store_name,callback:function(t){e.$set(e.tableFrom,"store_name",t)},expression:"tableFrom.store_name"}},[r("el-button",{staticClass:"el-button-solt",attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:function(t){e.getList(1),e.getCardList()}},slot:"append"})],1)],1),e._v(" "),r("el-form-item",{staticClass:"width100",attrs:{label:"总单单号："}},[r("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入总单订单号",size:"small"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList(1),e.getCardList()}},model:{value:e.tableFrom.group_order_sn,callback:function(t){e.$set(e.tableFrom,"group_order_sn",t)},expression:"tableFrom.group_order_sn"}},[r("el-button",{staticClass:"el-button-solt",attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:function(t){e.getList(1),e.getCardList()}},slot:"append"})],1)],1),e._v(" "),r("el-form-item",{staticClass:"width100",attrs:{label:"活动类型："}},[r("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){e.getList(1),e.getCardList()}},model:{value:e.tableFrom.activity_type,callback:function(t){e.$set(e.tableFrom,"activity_type",t)},expression:"tableFrom.activity_type"}},e._l(e.activityList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),r("el-form-item",{staticClass:"width100",staticStyle:{display:"block"},attrs:{label:"关键字："}},[r("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入订单号/收货人/联系方式",size:"small"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList(1),e.getCardList()}},model:{value:e.tableFrom.keywords,callback:function(t){e.$set(e.tableFrom,"keywords",t)},expression:"tableFrom.keywords"}},[r("el-button",{staticClass:"el-button-solt",attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:function(t){e.getList(1),e.getCardList()}},slot:"append"})],1),e._v(" "),r("el-dropdown",{staticClass:"dropdown",on:{command:e.exports}},[r("span",{staticClass:"el-dropdown-link"},[e._v("\n                列表导出"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"1"}},[e._v("导出订单")]),e._v(" "),r("el-dropdown-item",{attrs:{command:"2"}},[e._v("导出发货单")])],1)],1)],1),e._v(" "),r("el-form-item",{staticClass:"width100",attrs:{label:"用户信息："}},[r("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入用户昵称/手机号",size:"small"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getList(1),e.getCardList()}},model:{value:e.tableFrom.username,callback:function(t){e.$set(e.tableFrom,"username",t)},expression:"tableFrom.username"}},[r("el-button",{staticClass:"el-button-solt",attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:function(t){e.getList(1),e.getCardList()}},slot:"append"})],1),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.orderCancellation("")}}},[e._v("订单核销")]),e._v(" "),r("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{headers:e.myHeaders,action:e.fileUrl,"on-success":e.handleSuccess,"show-file-list":!1}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入批量发货")])],1),e._v(" "),r("el-button",{on:{click:e.getDeliveryList}},[e._v("批量发货记录")]),e._v(" "),r("el-button",{on:{click:e.downloadLogistics}},[e._v("下载物流公司对照表")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.batchSend}},[e._v("批量发送货")])],1)],1)],1),e._v(" "),e.headeNum.length>0?r("el-tabs",{on:{"tab-click":function(t){e.getList(1),e.getCardList(),e.getHeaderList()}},model:{value:e.tableFrom.order_type,callback:function(t){e.$set(e.tableFrom,"order_type",t)},expression:"tableFrom.order_type"}},e._l(e.headeNum,(function(e,t){return r("el-tab-pane",{key:t,attrs:{name:e.order_type.toString(),label:e.title+"("+e.count+")"}})})),1):e._e(),e._v(" "),r("cards-data",{attrs:{"card-lists":e.cardLists}})],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData.data,size:"mini","highlight-current-row":"","cell-class-name":e.addTdClass}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"商品总价："}},[r("span",[e._v(e._s(e._f("filterEmpty")(t.row.total_price)))])]),e._v(" "),r("el-form-item",{attrs:{label:"下单时间："}},[r("span",[e._v(e._s(t.row.create_time))])]),e._v(" "),r("el-form-item",{attrs:{label:"用户备注："}},[r("span",{staticStyle:{display:"inline-block",width:"200px"}},[e._v(e._s(e._f("filterEmpty")(t.row.mark)))])]),e._v(" "),r("el-form-item",{attrs:{label:"商家备注："}},[r("span",[e._v(e._s(e._f("filterEmpty")(t.row.remark)))])])],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-popover",{staticClass:"tabPop",attrs:{placement:"top-start",width:"100",trigger:"hover"}},[r("div",[r("span",{staticClass:"spBlock onHand",class:{check:"dan"===e.chkName},on:{click:function(r){return e.onHandle("dan",t.$index)}}},[e._v("选中本页")]),e._v(" "),r("span",{staticClass:"spBlock onHand",class:{check:"duo"===e.chkName},on:{click:function(t){return e.onHandle("duo")}}},[e._v("选中全部")])]),e._v(" "),r("el-checkbox",{attrs:{slot:"reference",value:"dan"===e.chkName&&e.checkedPage.indexOf(e.tableFrom.page)>-1||"duo"===e.chkName},on:{change:e.changeType},slot:"reference"})],1)]}},{key:"default",fn:function(t){return[r("el-checkbox",{attrs:{value:e.checkedIds.indexOf(t.row.order_id)>-1||"duo"===e.chkName&&-1===e.noChecked.indexOf(t.row.order_id)},on:{change:function(r){return e.changeOne(r,t.row)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"订单编号","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{display:"block"},domProps:{textContent:e._s(t.row.order_sn)}}),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.row.is_del>0,expression:"scope.row.is_del > 0"}],staticStyle:{color:"#ED4014",display:"block"}},[e._v("用户已删除")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"订单类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(1==t.row.is_virtual?"虚拟订单":0==t.row.order_type?"普通订单":"核销订单"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"活动类型","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[4!=t.row.activity_type?r("span",[e._v(e._s(1===t.row.activity_type?"秒杀":2===t.row.activity_type?"预售":3===t.row.activity_type?"助力":"--"))]):r("span",[e._v("拼团订单 "),t.row.groupUser&&t.row.groupUser.groupBuying?r("span",[e._v("-"+e._s(e._f("activityOrderStatus")(t.row.groupUser.groupBuying.status)))]):e._e()])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"real_name",label:"收货人/订购人","min-width":"130"}}),e._v(" "),r("el-table-column",{attrs:{label:"商品信息","min-width":"330"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.orderProduct,(function(i,a){return r("div",{key:a,staticClass:"tabBox acea-row row-middle"},[r("div",{staticClass:"demo-image__preview"},[r("el-image",{attrs:{src:i.cart_info.product.image,"preview-src-list":[i.cart_info.product.image]}})],1),e._v(" "),r("span",{staticClass:"tabBox_tit"},[e._v(e._s(i.cart_info.product.store_name+" | ")+e._s(i.cart_info.productAttr.sku))]),e._v(" "),r("span",{staticClass:"tabBox_pice"},[2===t.row.activity_type&&i.cart_info.productPresellAttr?r("span",[e._v(e._s("￥"+i.cart_info.productPresellAttr.presell_price+" x "+i.product_num))]):3===t.row.activity_type&&i.cart_info.productAssistAttr?r("span",[e._v(e._s("￥"+i.cart_info.productAssistAttr.assist_price+" x "+i.product_num))]):r("span",[e._v(e._s("￥"+i.cart_info.productAttr.price+" x "+i.product_num))]),e._v(" "),i.refund_num<i.product_num&&i.refund_num>=0?r("em",{staticStyle:{color:"red","font-style":"normal"}},[e._v("(-"+e._s(i.product_num-i.refund_num)+")")]):e._e()])])}))}}])}),e._v(" "),r("el-table-column",{attrs:{label:"实际支付","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.pay_price))]),e._v(" "),t.row.finalOrder?r("p",[e._v("尾款："+e._s(t.row.finalOrder.pay_price))]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"订单佣金","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s((parseFloat(t.row.extension_one)+parseFloat(t.row.extension_two)+parseFloat(t.row.refund_extension_one)+parseFloat(t.row.refund_extension_two)).toFixed(2)))]),e._v(" "),t.row.refund_extension_one>0||t.row.refund_extension_two>0?r("em",{staticStyle:{color:"red","font-style":"normal"}},[e._v("(-"+e._s((parseFloat(t.row.refund_extension_one)+parseFloat(t.row.refund_extension_two)).toFixed(2))+")")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"支付类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.paid?r("span",[e._v(e._s(e._f("orderPayType")(t.row.pay_type)))]):r("span",[e._v("--")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"支付状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(0===t.row.paid?"未支付":"已支付"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"订单状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.is_del?r("span",[0===t.row.paid?r("span",[e._v("待付款")]):r("span",[0===t.row.order_type||2===t.row.order_type?r("span",[e._v(e._s(e._f("orderStatusFilter")(t.row.status)))]):r("span",[e._v(e._s(e._f("takeOrderStatusFilter")(t.row.status)))])])]):r("span",[e._v("已删除")])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"下单时间","min-width":"130"}}),e._v(" "),r("el-table-column",{attrs:{label:"推广人","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.spread&&t.row.spread.nickname||"无"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"上级推广人","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.TopSpread&&t.row.TopSpread.nickname||"无"))])]}}])}),e._v(" "),r("el-table-column",{key:"8",attrs:{label:"操作","min-width":"150",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.orderFilter(t.row)?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.onRefundDetail(t.row.order_sn)}}},[e._v("查看退款单")]):e._e(),e._v(" "),0===t.row.paid&&0===t.row.is_del&&2!=t.row.activity_type?r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.edit(t.row.order_id)}}},[e._v("编辑")]):e._e(),e._v(" "),0!=t.row.order_type&&2!=t.row.order_type||0!==t.row.status||1!==t.row.paid?e._e():r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.send(t.row,t.row.order_id)}}},[e._v("发送货")]),e._v(" "),t.row.status>0||1===t.row.is_del?r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.onOrderDetails(t.row.order_id)}}},[e._v("订单详情")]):e._e(),e._v(" "),1==t.row.order_type&&1==t.row.paid&&0==t.row.status?r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.orderCancellation(t.row.verify_code)}}},[e._v("去核销")]):e._e(),e._v(" "),r("el-dropdown",{attrs:{trigger:"click"}},[r("span",{staticClass:"el-dropdown-link"},[e._v("\n              更多\n              "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[1===t.row.paid&&0===t.row.order_type?r("el-dropdown-item",{nativeOn:{click:function(r){return e.printOrder(t.row.order_id)}}},[e._v("订单打印")]):e._e(),e._v(" "),t.row.status<1&&0===t.row.is_del?r("el-dropdown-item",{nativeOn:{click:function(r){return e.onOrderDetails(t.row.order_id)}}},[e._v("订单详情")]):e._e(),e._v(" "),r("el-dropdown-item",{nativeOn:{click:function(r){return e.onOrderMark(t.row.order_id)}}},[e._v("订单备注")]),e._v(" "),0!==t.row.is_del?r("el-dropdown-item",{nativeOn:{click:function(r){return e.handleDelete(t.row,t.$index)}}},[e._v("删除订单")]):e._e(),e._v(" "),0==t.row.order_type&&1===t.row.status&&1===t.row.paid?r("el-dropdown-item",{nativeOn:{click:function(r){return e.reSend(t.row.order_id)}}},[e._v("修改发货信息")]):e._e()],1)],1)]}}])})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":e.tableFrom.limit,"current-page":e.tableFrom.page,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"操作记录",visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.LogLoading,expression:"LogLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.tableDataLog.data}},[r("el-table-column",{attrs:{prop:"order_id",align:"center",label:"订单ID","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"change_message",label:"操作记录",align:"center","min-width":"280"}}),e._v(" "),r("el-table-column",{attrs:{prop:"change_time",label:"操作时间",align:"center","min-width":"280"}})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":e.tableFromLog.limit,"current-page":e.tableFromLog.page,layout:"total, sizes, prev, pager, next, jumper",total:e.tableDataLog.total},on:{"size-change":e.handleSizeChangeLog,"current-change":e.pageChangeLog}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改订单",visible:e.editVisible,width:"700px"},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{ref:"formValidate",attrs:{model:e.formValidate,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"订单总价："}},[r("el-input-number",{attrs:{min:0,placeholder:"请输入订单总价"},on:{change:e.changePrice},model:{value:e.formValidate.total_price,callback:function(t){e.$set(e.formValidate,"total_price",t)},expression:"formValidate.total_price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"实际支付邮费："}},[r("el-input-number",{attrs:{min:0,placeholder:"请输入订单油费"},on:{change:e.changePrice},model:{value:e.formValidate.pay_postage,callback:function(t){e.$set(e.formValidate,"pay_postage",t)},expression:"formValidate.pay_postage"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"优惠金额"}},[r("span",[e._v(e._s(e.formValidate.coupon_price))])]),e._v(" "),r("el-form-item",{attrs:{label:"实际支付金额："}},[r("span",[e._v(e._s(e.formValidate.pay_price))])])],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.editConfirm}},[e._v("确定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.isBatch?"批量发货":"订单发送货",visible:e.sendVisible,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.sendVisible=t}}},[r("el-form",{ref:"shipment",attrs:{model:e.shipment,rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.isResend&&3!=e.noLogistics&&2!=e.tableFrom.order_type?r("el-form-item",{attrs:{label:1==e.shipment.delivery_type||4==e.shipment.delivery_type?"原快递公司：":"送货人姓名："}},[r("span",[e._v(e._s(e.original.delivery_name))])]):e._e(),e._v(" "),e.isResend&&3!=e.noLogistics&&2!=e.tableFrom.order_type?r("el-form-item",{attrs:{label:1==e.shipment.delivery_type||4==e.shipment.delivery_type?"原快递单号：":"送货人手机号："}},[r("span",[e._v(e._s(e.original.delivery_id))])]):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"选择类型：",prop:"delivery_type"}},[r("el-radio-group",{on:{change:e.changeSend},model:{value:e.shipment.delivery_type,callback:function(t){e.$set(e.shipment,"delivery_type",t)},expression:"shipment.delivery_type"}},[e.isBatch||2==e.tableFrom.order_type||1==e.orderType?e._e():r("el-radio",{attrs:{label:1}},[e._v("手动发货")]),e._v(" "),r("el-radio",{staticClass:"radio",attrs:{label:3}},[e._v(" "+e._s(1==e.orderType?"虚拟发货":"无需物流"))]),e._v(" "),1==e.isDump&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-radio",{staticClass:"radio",attrs:{label:4}},[e._v("电子面单打印")]):e._e(),e._v(" "),2!=e.tableFrom.order_type&&1!=e.orderType?r("el-radio",{attrs:{label:2}},[e._v("自己配送")]):e._e(),e._v(" "),2==e.tableFrom.order_type||1==e.orderType||e.isBatch?e._e():r("el-radio",{attrs:{label:5}},[e._v("同城配送")])],1)],1),e._v(" "),5==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"选择发货点：",prop:"station_id"}},[r("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择配送发货点"},model:{value:e.shipment.station_id,callback:function(t){e.$set(e.shipment,"station_id",t)},expression:"shipment.station_id"}},e._l(e.storeList,(function(e,t){return r("el-option",{key:e.value+t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),1!=e.shipment.delivery_type&&4!=e.shipment.delivery_type||2==e.tableFrom.order_type||1==e.orderType?e._e():r("el-form-item",{attrs:{label:"快递公司：",prop:"delivery_name"}},[r("el-select",{staticClass:"filter-item selWidth mr20",attrs:{filterable:"",placeholder:"请选择快递公司"},on:{change:function(t){return e.getTempsLst(e.shipment.delivery_name)}},model:{value:e.shipment.delivery_name,callback:function(t){e.$set(e.shipment,"delivery_name",t)},expression:"shipment.delivery_name"}},e._l(e.deliveryList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),5==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"包裹重量(kg)：",prop:"cargo_weight"}},[r("el-input-number",{attrs:{placeholder:"请输入包裹重量"},model:{value:e.shipment.cargo_weight,callback:function(t){e.$set(e.shipment,"cargo_weight",t)},expression:"shipment.cargo_weight"}})],1):e._e(),e._v(" "),5==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"配送备注："}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入配送单备注"},model:{value:e.shipment.mark,callback:function(t){e.$set(e.shipment,"mark",t)},expression:"shipment.mark"}})],1):e._e(),e._v(" "),1==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"快递单号：",prop:"delivery_id"}},[r("el-input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.shipment.delivery_id,callback:function(t){e.$set(e.shipment,"delivery_id",t)},expression:"shipment.delivery_id"}})],1):e._e(),e._v(" "),4==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"电子面单：",prop:"temp_id"}},[r("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择电子面单"},model:{value:e.shipment.temp_id,callback:function(t){e.$set(e.shipment,"temp_id",t)},expression:"shipment.temp_id"}},e._l(e.eleTempsLst,(function(e,t){return r("el-option",{key:e.temp_id+t,attrs:{label:e.title,value:e.temp_id}})})),1),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.getPicture()}}},[e._v("预览")])],1):e._e(),e._v(" "),4==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"寄件人姓名：",prop:"from_name"}},[r("el-input",{attrs:{placeholder:"请输入寄件人姓名"},model:{value:e.shipment.from_name,callback:function(t){e.$set(e.shipment,"from_name",t)},expression:"shipment.from_name"}})],1):e._e(),e._v(" "),4==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"寄件人电话：",prop:"from_tel"}},[r("el-input",{attrs:{placeholder:"请输入寄件人电话"},model:{value:e.shipment.from_tel,callback:function(t){e.$set(e.shipment,"from_tel",t)},expression:"shipment.from_tel"}})],1):e._e(),e._v(" "),2==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"送货人姓名：",prop:"to_name"}},[r("el-input",{attrs:{maxlength:"10",placeholder:"请输入送货人姓名"},model:{value:e.shipment.to_name,callback:function(t){e.$set(e.shipment,"to_name",t)},expression:"shipment.to_name"}})],1):e._e(),e._v(" "),2==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&2!=e.orderType?r("el-form-item",{attrs:{label:"送货人手机号：",prop:"to_phone"}},[r("el-input",{attrs:{placeholder:"请输入送货人手机号"},model:{value:e.shipment.to_phone,callback:function(t){e.$set(e.shipment,"to_phone",t)},expression:"shipment.to_phone"}})],1):e._e(),e._v(" "),4==e.shipment.delivery_type&&2!=e.tableFrom.order_type&&1!=e.orderType?r("el-form-item",{attrs:{label:"寄件人地址：",prop:"from_addr"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入寄件人地址"},model:{value:e.shipment.from_addr,callback:function(t){e.$set(e.shipment,"from_addr",t)},expression:"shipment.from_addr"}})],1):e._e(),e._v(" "),4!=e.shipment.type&&2!=e.activityType&&(e.productList.length>1||e.productNum>1)?r("el-form-item",{attrs:{label:"分单发货："}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"开启","inactive-text":"关闭"},model:{value:e.shipment.is_split,callback:function(t){e.$set(e.shipment,"is_split",t)},expression:"shipment.is_split"}}),e._v(" "),r("p",{staticClass:"area-desc"},[e._v("可选择表格中的商品单独发货，发货后会生成新的订单且不能撤回，请谨慎操作！")])],1):e._e(),e._v(" "),1==e.shipment.is_split&&2!=e.tableFrom.order_type&&(e.productList.length>1||e.productNum>1)?r("el-form-item",{attrs:{label:""}},[r("el-table",{ref:"multipleSelection",attrs:{data:e.productList,"tooltip-effect":"dark",size:"mini","row-key":function(e){return e.product_id}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{align:"center",type:"selection","reserve-selection":!0,"min-width":"50"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"商品信息","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"acea-row",staticStyle:{"align-items":"center"}},[r("div",{staticClass:"demo-image__preview"},[r("el-image",{attrs:{src:t.row.cart_info.product.image,"preview-src-list":[t.row.cart_info.product.image]}})],1),e._v(" "),r("span",{staticClass:"priceBox",staticStyle:{width:"150px"}},[e._v(e._s(t.row.cart_info.product.store_name))])])]}}],null,!1,1334329387)}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"规格","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"priceBox"},[e._v(e._s(t.row.cart_info.productAttr.sku))])]}}],null,!1,2489556760)}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"商品售价","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"priceBox"},[e._v(e._s(t.row.cart_info.productAttr.price))])]}}],null,!1,3535341656)}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"总数","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"priceBox"},[e._v(e._s(t.row.stock_num))])]}}],null,!1,13674865)}),e._v(" "),r("el-table-column",{attrs:{label:"待发数量",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0,max:t.row.refund_num},on:{blur:function(r){return e.limitCount(t.row)}},model:{value:t.row["product_num_input"],callback:function(r){e.$set(t.row,"product_num_input",r)},expression:"scope.row['product_num_input']"}})]}}],null,!1,4294881726)})],1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.shipment.remark,callback:function(t){e.$set(e.shipment,"remark",t)},expression:"shipment.remark"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.sendVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("shipment")}}},[e._v("提交")])],1)],1),e._v(" "),e.pictureVisible?r("el-dialog",{attrs:{visible:e.pictureVisible,width:"500px"},on:{"update:visible":function(t){e.pictureVisible=t}}},[r("img",{staticClass:"pictures",attrs:{src:e.pictureUrl}})]):e._e(),e._v(" "),r("details-from",{ref:"orderDetail"}),e._v(" "),r("file-list",{ref:"exportList"}),e._v(" "),r("delivery-record",{ref:"deliveryList"}),e._v(" "),r("order-cancellate",{ref:"orderCancellate",on:{getList:e.getList}})],1)},a=[],n=(r("7f7f"),r("c5f6"),r("c80c")),s=(r("6b54"),r("96cf"),r("3b8d")),o=(r("ac6a"),r("28a5"),r("f8b7")),l=r("2e83"),c=r("90e7"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.dialogVisible?r("el-dialog",{attrs:{title:"订单信息",visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.orderDatalist?r("div",{staticClass:"description"},[r("div",{staticClass:"title"},[e._v("用户信息")]),e._v(" "),r("div",{staticClass:"acea-row"},[r("div",{staticClass:"description-term"},[e._v("用户昵称："+e._s(e.orderDatalist.user.nickname))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("收货人/订购人："+e._s(e.orderDatalist.real_name))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("联系电话："+e._s(e.orderDatalist.user_phone))]),e._v(" "),0==e.orderDatalist.is_virtual&&0==e.orderDatalist.order_type?r("div",{staticClass:"description-term"},[e._v("收货地址："+e._s(e.orderDatalist.user_address))]):e._e()]),e._v(" "),r("el-divider"),e._v(" "),r("div",{staticClass:"title"},[e._v("收货信息")]),e._v(" "),r("div",{staticClass:"acea-row"},[r("div",{staticClass:"description-term"},[e._v("订单编号："+e._s(e.orderDatalist.order_sn))]),e._v(" "),0!==e.orderDatalist.order_type||e.orderDatalist.pay_time?e._e():r("div",{staticClass:"description-term"},[e._v("订单状态：待付款")]),e._v(" "),0===e.orderDatalist.order_type&&e.orderDatalist.pay_time?r("div",{staticClass:"description-term"},[e._v("订单状态："+e._s(e._f("orderStatusFilter")(e.orderDatalist.status)))]):e._e(),e._v(" "),1===e.orderDatalist.order_type&&e.orderDatalist.pay_time?r("div",{staticClass:"description-term"},[e._v("订单状态："+e._s(e._f("cancelOrderStatusFilter")(e.orderDatalist.status)))]):e._e(),e._v(" "),r("div",{staticClass:"description-term"},[e._v("商品总数："+e._s(e.orderDatalist.total_num))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("订单总价："+e._s(e.orderDatalist.total_price))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("交付邮费："+e._s(e.orderDatalist.pay_postage))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("优惠券金额："+e._s(e.orderDatalist.coupon_price))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("实际支付："+e._s(e.orderDatalist.finalOrder?parseFloat(e.orderDatalist.finalOrder.pay_price)+parseFloat(e.orderDatalist.pay_price):e.orderDatalist.pay_price))]),e._v(" "),e.orderDatalist.integral>0?r("div",{staticClass:"description-term"},[e._v("积分抵扣：使用了"+e._s(e.orderDatalist.integral)+"个积分，抵扣了"+e._s(e.orderDatalist.integral_price)+"元")]):e._e(),e._v(" "),e.orderDatalist.give_integral>0?r("div",{staticClass:"description-term"},[e._v("赠送积分："+e._s(e.orderDatalist.give_integral)+"个")]):e._e(),e._v(" "),r("div",{staticClass:"description-term"},[e._v("创建时间："+e._s(e.orderDatalist.create_time))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("支付方式："+e._s(e._f("payTypeFilter")(e.orderDatalist.pay_type)))]),e._v(" "),e.orderDatalist.activity_type?e._e():r("div",{staticClass:"description-term"},[e._v("\n            一级佣金："+e._s(parseFloat(e.orderDatalist.extension_one)+parseFloat(e.orderDatalist.refund_extension_one))+"\n            "),e.orderDatalist.refund_extension_one>0?r("em",{staticStyle:{color:"red","font-style":"normal"}},[e._v("(-"+e._s(e.orderDatalist.refund_extension_one)+")")]):e._e()]),e._v(" "),e.orderDatalist.activity_type?e._e():r("div",{staticClass:"description-term"},[e._v("\n            二级佣金："+e._s(parseFloat(e.orderDatalist.extension_two)+parseFloat(e.orderDatalist.refund_extension_two))+"\n            "),e.orderDatalist.refund_extension_two>0?r("em",{staticStyle:{color:"red","font-style":"normal"}},[e._v("(-"+e._s(e.orderDatalist.refund_extension_two)+")")]):e._e()]),e._v(" "),e.orderDatalist.svip_discount?r("div",{staticClass:"description-term"},[e._v("SVIP商品价优惠: "+e._s(e.orderDatalist.svip_discount))]):e._e(),e._v(" "),r("div",{staticClass:"description-term"},[e._v("商家备注："+e._s(e.orderDatalist.remark))])]),e._v(" "),e.orderDatalist.order_extend?[r("el-divider"),e._v(" "),r("div",{staticClass:"title"},[e._v("用户提交信息")]),e._v(" "),r("div",{staticClass:"acea-row"},e._l(e.orderDatalist.order_extend,(function(t,i){return r("div",{staticClass:"description-term"},[Array.isArray(t)?r("span",[e._v("\n                "+e._s(i)+"：\n                "),e._l(t,(function(e,t){return r("img",{staticStyle:{width:"30px",height:"30px",position:"relative",top:"10px"},attrs:{src:e}})}))],2):r("span",[e._v(e._s(i)+"："+e._s(t))])])})),0)]:e._e(),e._v(" "),[r("el-divider"),e._v(" "),r("div",{staticClass:"title"},[e._v("操作记录")]),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.LogLoading,expression:"LogLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.tableDataLog.data}},[r("el-table-column",{attrs:{prop:"order_id",align:"center",label:"订单ID","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"change_message",label:"操作记录",align:"center","min-width":"280"}}),e._v(" "),r("el-table-column",{attrs:{prop:"change_time",label:"操作时间",align:"center","min-width":"280"}})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":e.tableFromLog.limit,"current-page":e.tableFromLog.page,layout:"total, sizes, prev, pager, next, jumper",total:e.tableDataLog.total},on:{"size-change":e.handleSizeChangeLog,"current-change":e.pageChangeLog}})],1)],e._v(" "),"1"===e.orderDatalist.delivery_type||"4"===e.orderDatalist.delivery_type?[r("el-divider"),e._v(" "),r("div",{staticClass:"title"},[e._v("物流信息")]),e._v(" "),r("div",{staticClass:"acea-row"},[r("div",{staticClass:"description-term"},[e._v("快递公司："+e._s(e.orderDatalist.delivery_name))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("\n              快递单号："+e._s(e.orderDatalist.delivery_id)+"\n              "),r("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.openLogistics}},[e._v("物流查询")])],1)])]:e._e(),e._v(" "),"2"===e.orderDatalist.delivery_type?[r("el-divider"),e._v(" "),r("div",{staticClass:"title"},[e._v("配送信息")]),e._v(" "),r("div",{staticClass:"acea-row"},[r("div",{staticClass:"description-term"},[e._v("送货人姓名："+e._s(e.orderDatalist.delivery_name))]),e._v(" "),r("div",{staticClass:"description-term"},[e._v("送货人电话："+e._s(e.orderDatalist.delivery_id))])])]:e._e(),e._v(" "),e.orderDatalist.mark?[r("el-divider"),e._v(" "),r("div",{staticClass:"title"},[e._v("用户备注")]),e._v(" "),r("div",{staticClass:"acea-row"},[r("div",{staticClass:"description-term"},[e._v(e._s(e.orderDatalist.mark))])])]:e._e()],2):e._e()])]):e._e(),e._v(" "),r("el-dialog",{attrs:{title:"物流查询",visible:e.dialogLogistics,width:"350px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogLogistics=t}}},[e.orderDatalist?r("logistics-from",{attrs:{"order-datalist":e.orderDatalist,result:e.result}}):e._e()],1)],1)},u=[],p=r("6f92"),m={name:"OrderDetail",components:{logisticsFrom:p["a"]},data:function(){return{dialogVisible:!1,dialogLogistics:!1,loading:!1,result:[],order_id:"",tableFromLog:{page:1,limit:10},tableDataLog:{data:[],total:0},LogLoading:!1,orderDatalist:null}},methods:{onOrderDetails:function(e){var t=this;this.order_id=e,this.loading=!0,Object(o["C"])(e).then((function(e){t.orderDatalist=e.data,t.loading=!1})).catch((function(e){var r=e.message;t.loading=!1,t.$message.error(r)}))},openLogistics:function(){this.getOrderData(),this.dialogLogistics=!0},handleClose:function(){this.dialogLogistics=!1},getOrderData:function(){var e=this;Object(o["r"])(this.orderDatalist.order_id).then(function(){var t=Object(s["a"])(Object(n["a"])().mark((function t(r){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.result=r.data;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$message.error(t.message)}))},onOrderLog:function(e){var t=this;this.dialogVisible=!0,this.LogLoading=!0,Object(o["F"])(e,this.tableFromLog).then((function(e){t.tableDataLog.data=e.data.list,t.tableDataLog.total=e.data.count,t.LogLoading=!1})).catch((function(e){t.$message.error(e.message),t.LogLoading=!1}))},pageChangeLog:function(e){this.tableFromLog.page=e,this.onOrderLog(this.order_id)},handleSizeChangeLog:function(e){this.tableFromLog.limit=e,this.onOrderLog(this.order_id)}}},_=m,f=(r("9a58"),r("2877")),h=Object(f["a"])(_,d,u,!1,null,"69fcb5de",null),v=h.exports,g=r("30dc"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.fileVisible?r("el-dialog",{attrs:{title:"批量发货记录",visible:e.fileVisible,width:"900px"},on:{"update:visible":function(t){e.fileVisible=t}}},[r("div",{staticClass:"container"},[r("el-form",{attrs:{size:"small",inline:"","label-width":"100px"}},[r("el-form-item",{staticClass:"width100",attrs:{label:"操作时间"}},[r("el-date-picker",{staticStyle:{width:"250px"},attrs:{"value-format":"yyyy/MM/dd",format:"yyyy/MM/dd",size:"small",type:"daterange",placement:"bottom-end",placeholder:"自定义时间"},on:{change:e.onchangeTime},model:{value:e.timeVal,callback:function(t){e.timeVal=t},expression:"timeVal"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"发货类型："}},[r("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){e.getList(1)}},model:{value:e.tableFrom.type,callback:function(t){e.$set(e.tableFrom,"type",t)},expression:"tableFrom.type"}},e._l(e.deliveryTypeList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"状态："}},[r("el-select",{staticClass:"filter-item selWidth mr20",attrs:{placeholder:"请选择",clearable:""},on:{change:function(t){e.getList(1)}},model:{value:e.tableFrom.status,callback:function(t){e.$set(e.tableFrom,"status",t)},expression:"tableFrom.status"}},e._l(e.deliveryStatusList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData.data,size:"mini","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"序号","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.$index+(e.tableFrom.page-1)*e.tableFrom.limit+1))])]}}],null,!1,2611860760)}),e._v(" "),r("el-table-column",{attrs:{label:"发货类型","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("deliveryType")(t.row.type)))])]}}],null,!1,3190513475)}),e._v(" "),r("el-table-column",{attrs:{label:"操作时间",prop:"create_time","min-width":"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"发货单数",prop:"count","min-width":"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"成功发货单数",prop:"success","min-width":"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("deliveryStatusFilter")(t.row.status)))])]}}],null,!1,1539921219)}),e._v(" "),r("el-table-column",{key:"8",attrs:{label:"操作","min-width":"150",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1!=t.row.status?r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.detail(t.row.import_id)}}},[e._v("查看")]):e._e(),e._v(" "),-1!=t.row.status?r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.downLoad(t.row.import_id)}}},[e._v("生成文件")]):e._e(),e._v(" "),-1==t.row.status?r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:function(r){return e.detail(t.row.import_id)}}},[e._v("查看原因")]):e._e()]}}],null,!1,2576915168)})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"page-sizes":[10,20,30],"page-size":e.tableFrom.limit,"current-page":e.tableFrom.page,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange}})],1)],1)]):e._e(),e._v(" "),e.dialogVisible?r("el-dialog",{attrs:{title:"",visible:e.dialogVisible,width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.recordData.data,size:"mini","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"序号","min-width":"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.$index+(e.recordFrom.page-1)*e.recordFrom.limit+1))])]}}],null,!1,748015416)}),e._v(" "),r("el-table-column",{attrs:{label:"订单号",prop:"order_sn","min-width":"200"}}),e._v(" "),r("el-table-column",{attrs:{label:"物流公司",prop:"delivery_name","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"物流单号",prop:"delivery_id","min-width":"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"发货状态",prop:"status","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"异常原因",prop:"mark","min-width":"120"}})],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"page-sizes":[10,20,30],"page-size":e.recordFrom.limit,"current-page":e.recordFrom.page,layout:"total, sizes, prev, pager, next, jumper",total:e.recordData.total},on:{"size-change":e.handleSizeChange1,"current-change":e.pageChange1}})],1)],1)]):e._e()],1)},y=[],w={name:"DeliveryList",data:function(){return{fileVisible:!1,dialogVisible:!1,loading:!1,timeVal:[],deliveryStatusList:[{label:"全部",value:""},{label:"全部完成",value:1},{label:"部分完成",value:10},{label:"处理中",value:0},{label:"处理失败",value:-1}],deliveryTypeList:[{label:"全部",value:""},{label:"发货",value:1},{label:"送货",value:2},{label:"无需物流",value:3},{label:"电子面单",value:4}],tableData:{data:[],total:0},recordData:{data:[],total:0},recordFrom:{page:1,limit:20},tableFrom:{page:1,limit:10,date:"",status:""},recordId:""}},methods:{getList:function(e){var t=this;this.loading=!0,this.tableFrom.page=e||this.tableFrom.page,Object(o["i"])(this.tableFrom).then((function(e){t.fileVisible=!0,t.tableData.data=e.data.list,t.tableData.total=e.data.count,t.loading=!1})).catch((function(e){t.$message.error(e.message),t.listLoading=!1}))},downLoad:function(e){var t=this;Object(o["h"])(e).then((function(e){var r=t.$createElement;t.$msgbox({title:"提示",message:r("p",null,[r("span",null,'文件正在生成中，请稍后点击"'),r("span",{style:"color: teal"},"导出记录"),r("span",null,'"查看~ ')]),confirmButtonText:"我知道了"}).then((function(e){}))})).catch((function(e){t.$message.error(e.message)}))},detail:function(e){var t=this;this.recordId=e,Object(o["g"])(e,this.recordFrom).then((function(e){t.dialogVisible=!0,t.recordData.data=e.data.list,t.recordData.total=e.data.count})).catch((function(e){t.$message.error(e.message)}))},onchangeTime:function(e){this.timeVal=e,this.tableFrom.date=e?this.timeVal.join("-"):"",this.getList(1)},pageChange:function(e){this.tableFrom.page=e,this.getList("")},handleSizeChange:function(e){this.tableFrom.limit=e,this.getList("")},pageChange1:function(e){this.recordFrom.page=e,this.getList(""),this.detail(this.recordId)},handleSizeChange1:function(e){this.recordFrom.limit=e,this.getList(""),this.detail(this.recordId)}}},k=w,C=(r("1aca"),Object(f["a"])(k,b,y,!1,null,"96d4296a",null)),x=C.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.dialogVisible?r("el-dialog",{attrs:{title:"订单核销",visible:e.dialogVisible,width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"container"},[r("el-form",{attrs:{"label-width":"80px",size:"small"}},[e.isColum?e._e():r("el-form-item",{attrs:{label:"核销码："}},[r("el-input",{staticClass:"selWidth",attrs:{placeholder:"请输入核销码查询订单号和商品",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchOrder(t)}},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.searchOrder}},[e._v("搜索")])],1),e._v(" "),r("el-form-item",{attrs:{label:"订单号："}},[r("span",[e._v(e._s(e.orderData.order_sn))])])],1),e._v(" "),r("div",{staticStyle:{"margin-top":"20px"}},[r("el-table",{ref:"multipleSelection",attrs:{data:e.productList,"tooltip-effect":"dark",size:"mini","row-key":function(e){return e.product_id},"header-cell-style":{background:"#F0F5FF"}},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{align:"center",type:"selection","reserve-selection":!0,"min-width":"50"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"商品信息","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"acea-row",staticStyle:{"align-items":"center"}},[r("div",{staticClass:"demo-image__preview"},[r("el-image",{attrs:{src:t.row.cart_info.product.image,"preview-src-list":[t.row.cart_info.product.image]}})],1),e._v(" "),r("span",{staticClass:"priceBox",staticStyle:{width:"150px"}},[e._v(e._s(t.row.cart_info.product.store_name))])])]}}],null,!1,1334329387)}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"规格","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"priceBox"},[e._v(e._s(t.row.cart_info.productAttr.sku))])]}}],null,!1,2489556760)}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"订单金额","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"priceBox"},[e._v(e._s(t.row.cart_info.productAttr.price))])]}}],null,!1,3535341656)}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"priceBox"},[e._v("待核销")])]}}],null,!1,3635758024)}),e._v(" "),r("el-table-column",{attrs:{align:"center",prop:"product_num",label:"总数","min-width":"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"待核销数量",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{staticClass:"priceBox",attrs:{type:"number",min:0,max:t.row.max_num},on:{change:function(r){return e.limitNum(t.row)}},model:{value:t.row["refund_num"],callback:function(r){e.$set(t.row,"refund_num",r)},expression:"scope.row['refund_num']"}})]}}],null,!1,4190016114)})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleCancellation}},[e._v("核销")])],1)]):e._e()],1)},D=[],F={name:"OrderCancellate",data:function(){return{dialogVisible:!1,loading:!1,code:"",order_id:"",orderData:"",multipleSelection:[],ids:[],isColum:!1,productList:[]}},methods:{searchOrder:function(){if(!this.code)return this.$message.warning("输入核销码!");this.productDetails(this.code)},handleCancellation:function(){var e=this;if(!this.code)return this.$message.warning("输入核销码!");if(!this.multipleSelection.length)return this.$message.warning("请选择核销商品!");var t=[];this.multipleSelection.map((function(e){t.push({id:e.order_product_id,num:e.refund_num})})),Object(o["t"])(this.order_id,{verify_code:this.code,data:t}).then((function(t){e.$message.success(t.message),e.dialogVisible=!1,e.$emit("getList","")})).catch((function(t){var r=t.message;e.$message.error(r)}))},productDetails:function(e){var t=this;this.code=e,this.loading=!0,Object(o["z"])(e).then((function(e){t.orderData=e.data,t.order_id=e.data.order_id,t.productList=e.data.orderProduct,t.productList.forEach((function(e,t){e.max_num=e.refund_num})),t.loading=!1})).catch((function(e){var r=e.message;t.loading=!1,t.$message.error(r)}))},handleSelectionChange:function(e){this.multipleSelection=e},limitNum:function(e){e.refund_num>e.max_num?e.refund_num=e.max_num:e.refund_num<1&&(e.refund_num=1)}}},O=F,S=(r("53b5"),Object(f["a"])(O,L,D,!1,null,"5efee90a",null)),A=S.exports,V=r("0f56"),z=r("5f87"),T=r("bbcc"),$=r("83d6"),N={components:{detailsFrom:v,cardsData:V["a"],fileList:g["a"],deliveryRecord:x,orderCancellate:A},data:function(){return{fileUrl:T["a"].https+"/store/import/delivery",myHeaders:{"X-Token":Object(z["a"])()},orderId:0,tableData:{data:[],total:0},listLoading:!0,roterPre:$["roterPre"],tableFrom:{order_sn:this.$route.query.order_sn?this.$route.query.order_sn:"",group_order_sn:"",order_type:"-1",keywords:"",store_name:"",status:"",date:"",page:1,limit:20,type:"1",username:"",order_id:this.$route.query.id?this.$route.query.id:"",activity_type:""},activityList:[{value:0,label:"普通订单"},{value:1,label:"秒杀订单"},{value:2,label:"预售订单"},{value:3,label:"助力订单"},{value:4,label:"拼团订单"}],orderChartType:{},timeVal:[],fromList:{title:"选择时间",custom:!0,fromTxt:[{text:"全部",val:""},{text:"今天",val:"today"},{text:"昨天",val:"yesterday"},{text:"最近7天",val:"lately7"},{text:"最近30天",val:"lately30"},{text:"本月",val:"month"},{text:"本年",val:"year"}]},ids:"",tableFromLog:{page:1,limit:10},tableDataLog:{data:[],total:0},LogLoading:!1,dialogVisible:!1,fileVisible:!1,editVisible:!1,sendVisible:!1,pictureVisible:!1,cardLists:[],orderDatalist:null,headeNum:[],editId:"",formValidate:{total_price:"",pay_postage:"",pay_price:"",coupon_price:""},deliveryList:[],eleTempsLst:[],productList:[],productNum:0,storeList:[],multipleSelection:[],shipment:{delivery_type:1,station_id:"",is_split:"0",split:[]},original:{delivery_name:"",delivery_id:""},isResend:!1,chkName:"",checkedPage:[],checkedIds:[],noChecked:[],allCheck:!1,isBatch:!1,delivery_name:"",isDump:!1,noLogistics:!1,orderType:0,activityType:0,rules:{delivery_type:[{required:!0,message:"请选择发送货方式",trigger:"change"}],station_id:[{required:!0,message:"请选择发货点",trigger:"change"}],delivery_name:[{required:!0,message:"请选择快递公司",trigger:"change"}],to_name:[{required:!0,message:"请输入送货人姓名",trigger:"blur"}],delivery_id:[{required:!0,message:"请输入快递单号",trigger:"blur"}],cargo_weight:[{required:!0,message:"请输入包裹重量",trigger:"blur"}],to_phone:[{required:!0,message:"请输入送货人手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],temp_id:[{required:!0,message:"请选择电子面单",trigger:"change"}],from_name:[{required:!0,message:"请输入寄件人姓名",trigger:"blur"}],from_tel:[{required:!0,message:"请输入寄件人电话",trigger:"blur"},{pattern:/^1(3|4|5|6|7|8|9)\d{9}$/,message:"请输入正确的联系方式",trigger:"blur"}],from_addr:[{required:!0,message:"请输入寄件人地址",trigger:"blur"}]}}},mounted:function(){this.$route.query.hasOwnProperty("order_sn")?this.tableFrom.order_sn=this.$route.query.order_sn:this.tableFrom.order_sn="",this.isOpenDump(),this.headerList(),this.getCardList(),this.getExpressLst(),this.getList(1),this.getHeaderList(),this.getStoreList()},methods:{limitCount:function(e){e.stock>e.product_num&&(e.stock=e.product_num)},handleSelectionChange:function(e){this.multipleSelection=e;var t=[];this.multipleSelection.map((function(e){t.push({id:e.order_product_id,num:e.product_num})})),this.ids=t},isOpenDump:function(){var e=this;Object(c["y"])().then((function(t){e.isDump=t.data.crmeb_serve_dump,t.data.crmeb_serve_dump&&e.getEleTempData()})).catch((function(t){e.$message.error(t.message)}))},getExpressLst:function(){var e=this;Object(o["o"])().then((function(t){e.deliveryList=t.data})).catch((function(t){e.$message.error(t.message)}))},getTempsLst:function(e){var t=this;Object(o["n"])({com:e}).then((function(e){t.eleTempsLst=e.data.data}))},getEleTempData:function(){var e=this;Object(o["q"])().then((function(t){var r=t.data,i=e.shipment.delivery_type;e.shipment={from_name:r.mer_from_name,from_addr:r.mer_from_addr,from_tel:r.mer_from_tel,delivery_type:i,delivery_name:r.mer_from_com,temp_id:r.mer_config_temp_id},e.getTempsLst(r.mer_from_com)})).catch((function(t){e.$message.error(t.message)}))},getStoreList:function(){var e=this;Object(o["p"])().then((function(t){e.storeList=t.data})).catch((function(t){e.$message.error(t.message)}))},changeSend:function(e){this.$refs["shipment"].clearValidate(),3==e&&(this.shipment.is_split="0",delete this.shipment.split)},getPicture:function(e){var t=this;this.shipment.temp_id?this.eleTempsLst.forEach((function(e,r){e["temp_id"]==t.shipment.temp_id&&(t.pictureVisible=!0,t.pictureUrl=e["pic"])})):this.$message.error("选择电子面单后才可以预览")},batchSend:function(){if(0==this.checkedIds.length)return this.$message.warning("请先选择订单");this.isBatch=!0,this.sendVisible=!0,this.shipment.delivery_type=2,this.shipment.order_id=this.checkedIds},handleClose:function(){this.sendVisible=!1,this.$refs["shipment"].resetFields()},onHandle:function(e){this.chkName=this.chkName===e?"":e,this.changeType(!(""===this.chkName))},changeType:function(e){e?this.chkName||(this.chkName="dan"):(this.chkName="",this.allCheck=!1);var t=this.checkedPage.indexOf(this.tableFrom.page);"dan"===this.chkName?this.checkedPage.push(this.tableFrom.page):t>-1&&this.checkedPage.splice(t,1),this.syncCheckedId()},syncCheckedId:function(){var e=this,t=this.tableData.data.map((function(e){return e.order_id}));"duo"===this.chkName?(this.checkedIds=[],this.allCheck=!0):"dan"===this.chkName?(this.allCheck=!1,t.forEach((function(t){var r=e.checkedIds.indexOf(t);-1===r&&e.checkedIds.push(t)}))):t.forEach((function(t){var r=e.checkedIds.indexOf(t);r>-1&&e.checkedIds.splice(r,1)}))},changeOne:function(e,t){if(e)if("duo"===this.chkName){var r=this.noChecked.indexOf(t.order_id);r>-1&&this.noChecked.splice(r,1)}else{var i=this.checkedIds.indexOf(t.order_id);-1===i&&this.checkedIds.push(t.order_id)}else if("duo"===this.chkName){var a=this.noChecked.indexOf(t.order_id);-1===a&&this.noChecked.push(t.order_id)}else{var n=this.checkedIds.indexOf(t.order_id);n>-1&&this.checkedIds.splice(n,1)}},getHeaderList:function(){var e=this;Object(o["D"])().then((function(t){e.headeNum=t.data})).catch((function(t){e.$message.error(t.message)}))},orderFilter:function(e){var t=!1;return e.orderProduct.forEach((function(e){e.refund_num<e.product_num&&(t=!0)})),t},onRefundDetail:function(e){this.$router.push({path:"refund",query:{sn:e}})},addTdClass:function(e){if(!(e.row.status>0&&1==e.row.paid))return" ";for(var t=0;t<e.row.orderProduct.length;t++)if(e.row.orderProduct[t].refund_num>=0&&e.row.orderProduct[t].refund_num<e.row.orderProduct[t].product_num)return"row-bg"},onOrderDetails:function(e){this.orderId=e,this.$refs.orderDetail.dialogVisible=!0,this.$refs.orderDetail.onOrderDetails(e),this.$refs.orderDetail.onOrderLog(e)},exports:function(){var e=Object(s["a"])(Object(n["a"])().mark((function e(t){var r,i,a,s,o;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=JSON.parse(JSON.stringify(this.tableFrom)),i=[],r.page=1,r.ids=this.checkedIds.toString(),a=1,s={},o=0;case 6:if(!(o<a)){e.next=22;break}if(1!=t){e.next=13;break}return e.next=10,this.downOrderData(r);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,this.downInvoiceData(r);case 15:e.t0=e.sent;case 16:s=e.t0,a=Math.ceil(s.count/r.limit),s.export.length&&(i=i.concat(s.export),r.page++);case 19:o++,e.next=6;break;case 22:return Object(l["a"])(s.header,s.title,i,s.foot,s.filename),e.abrupt("return");case 24:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),downOrderData:function(e){return new Promise((function(t,r){Object(o["m"])(e).then((function(e){return t(e.data)}))}))},downInvoiceData:function(e){return new Promise((function(t,r){Object(o["l"])(e).then((function(e){return t(e.data)}))}))},getDeliveryList:function(){this.$refs.deliveryList.getList()},handleSuccess:function(e){200===e.status?this.$message.success(e.message):this.$message.error(e.message)},downloadLogistics:function(){window.open(T["a"].https+"/excel/download/express?token="+Object(z["a"])())},orderCancellation:function(e){var t=this;t.$refs.orderCancellate.dialogVisible=!0,e?(t.$refs.orderCancellate.productDetails(e),t.$refs.orderCancellate.isColum=!0):t.$refs.orderCancellate.isColum=!1},handleCancellation:function(e){var t=this;this.$confirm("确定核销此订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["z"])(e).then((function(e){t.$message.success(e.message),t.getList("")})).catch((function(e){t.$message.error(e.message),t.LogLoading=!1}))})).catch((function(){t.$message({type:"info",message:"已取消核销"})}))},onOrderLog:function(e){var t=this;this.dialogVisible=!0,this.LogLoading=!0,Object(o["F"])(e,this.tableFromLog).then((function(e){t.tableDataLog.data=e.data.list,t.tableDataLog.total=e.data.count,t.LogLoading=!1})).catch((function(e){t.$message.error(e.message),t.LogLoading=!1}))},pageChangeLog:function(e){this.tableFromLog.page=e,this.getList("")},handleSizeChangeLog:function(e){this.tableFromLog.limit=e,this.getList("")},printOrder:function(e){var t=this;Object(o["G"])(e).then((function(e){t.$message.success(e.message)})).catch((function(e){t.$message.error(e.message)}))},handleDelete:function(e,t){var r=this;1===e.is_del?this.$modalSure().then((function(){Object(o["A"])(e.order_id).then((function(e){var i=e.message;r.$message.success(i),r.tableData.data.splice(t,1)})).catch((function(e){var t=e.message;r.$message.error(t)}))})):this.$confirm("您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！","提示",{confirmButtonText:"确定",type:"error"})},onOrderMark:function(e){var t=this;this.$modalForm(Object(o["H"])(e)).then((function(){return t.getList("")}))},selectChange:function(e){this.timeVal=[],this.tableFrom.date=e,this.getCardList(),this.getList(1)},onchangeTime:function(e){this.timeVal=e,this.tableFrom.date=e?this.timeVal.join("-"):"",this.getCardList(),this.getList(1)},edit:function(e){var t=this;this.editId=e,this.editVisible=!0,Object(o["C"])(e).then((function(e){t.formValidate={pay_postage:e.data.pay_postage,total_price:e.data.total_price,coupon_price:e.data.coupon_price,pay_price:(Number(e.data.total_price)+Number(e.data.pay_postage)-Number(e.data.coupon_price)).toFixed(2)},t.loading=!1})).catch((function(e){var r=e.message;t.loading=!1,t.$message.error(r)}))},editConfirm:function(){var e=this;Object(o["I"])(this.editId,this.formValidate).then((function(t){e.editVisible=!1,e.$message.success(t.message),e.getList("")})).catch((function(t){var r=t.message;e.$message.error(r)}))},changePrice:function(){this.formValidate.pay_price=(this.formValidate.total_price+this.formValidate.pay_postage-this.formValidate.coupon_price).toFixed(2)},send:function(e,t){this.isBatch=!1,this.sendVisible=!0,this.isResend=!1,this.orderId=t,this.activityType=e.activity_type,this.orderType=e.is_virtual,this.shipment.delivery_type=1===this.orderType?3:1,e.orderProduct.forEach((function(e){e.stock_num=e.product_num})),this.productList=e.orderProduct,this.productNum=e.orderProduct&&e.orderProduct[0]&&e.orderProduct[0]["product_num"]||0,delete this.shipment.order_id,2==this.tableFrom.order_type&&(this.shipment.delivery_type=3)},sendReset:function(){this.shipment={delivery_type:1,delivery_name:"",delivery_id:"",from_name:"",from_addr:"",from_tel:"",temp_id:""}},reSend:function(e){var t=this;this.isBatch=!1,this.sendVisible=!0,this.orderId=e,this.isResend=!0,delete this.shipment.order_id,Object(o["C"])(e).then((function(e){var r=e.data;t.shipment.delivery_type=t.isDump||4!=r.delivery_type?Number(r.delivery_type):1,t.noLogistics=r.delivery_type,t.loading=!1,t.original={delivery_name:r.delivery_name,delivery_id:r.delivery_id},t.loading=!1})).catch((function(e){var r=e.message;t.loading=!1,t.$message.error(r)}))},submitForm:function(e){var t=this;if(2==this.shipment.delivery_type&&(this.shipment.delivery_name=this.shipment.to_name,this.shipment.delivery_id=this.shipment.to_phone),"0"!=this.shipment.is_split&&this.shipment.is_split&&2!=this.orderType){if(!this.multipleSelection.length)return this.$message.warning("请选择拆单商品!");var r=[];this.multipleSelection.map((function(e){r.push({id:e.order_product_id,num:e.product_num_input})})),this.ids=r,this.shipment.split=this.ids}this.$refs[e].validate((function(e){e&&(delete t.shipment.to_name,delete t.shipment.to_phone,console.log(t.shipment),t.isBatch?Object(o["a"])(t.shipment).then((function(e){t.sendVisible=!1,t.$message.success(e.message),t.getList(""),t.sendReset()})).catch((function(e){var r=e.message;t.$message.error(r)})):Object(o["B"])(t.orderId,t.shipment).then((function(e){t.sendVisible=!1,t.$message.success(e.message),t.getList(""),t.sendReset()})).catch((function(e){var r=e.message;t.$message.error(r)})))}))},getList:function(e){var t=this;this.listLoading=!0,this.tableFrom.page=e||this.tableFrom.page,Object(o["E"])(this.tableFrom).then((function(e){e.data.list.forEach((function(e){e.orderProduct.forEach((function(e){e.product_num_input=e.refund_num}))})),t.tableData.data=e.data.list,t.tableData.total=e.data.count,t.listLoading=!1})).catch((function(e){t.$message.error(e.message),t.listLoading=!1}))},getCardList:function(){var e=this;Object(o["b"])(this.tableFrom).then((function(t){e.cardLists=t.data})).catch((function(t){e.$message.error(t.message)}))},pageChange:function(e){this.tableFrom.page=e,this.getList("")},handleSizeChange:function(e){this.tableFrom.limit=e,this.getList("")},headerList:function(){var e=this;Object(o["c"])().then((function(t){e.orderChartType=t.data})).catch((function(t){e.$message.error(t.message)}))}}},j=N,E=(r("3379"),Object(f["a"])(j,i,a,!1,null,"20d48029",null));t["default"]=E.exports},"6f92":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"logistics acea-row row-top"},[e._m(0),e._v(" "),r("div",{staticClass:"logistics_cent"},[r("span",[e._v("物流公司："+e._s(e.logisticsName?e.orderDatalist.delivery_type:e.orderDatalist.delivery_name))]),e._v(" "),r("span",[e._v("物流单号："+e._s(e.orderDatalist.delivery_id))])])]),e._v(" "),r("div",{staticClass:"acea-row row-column-around trees-coadd"},[r("div",{staticClass:"scollhide"},[r("el-timeline",e._l(e.result,(function(t,i){return r("el-timeline-item",{key:i},[r("p",{staticClass:"time",domProps:{textContent:e._s(t.time)}}),e._v(" "),r("p",{staticClass:"content",domProps:{textContent:e._s(t.status)}})])})),1)],1)])])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"logistics_img"},[i("img",{attrs:{src:r("bd9b")}})])}],n={name:"Logistics",props:{orderDatalist:{type:Object,default:null},result:{type:Array,default:function(){return[]}},logisticsName:{type:String,default:""}}},s=n,o=(r("81d7"),r("2877")),l=Object(o["a"])(s,i,a,!1,null,"0aac799c",null);t["a"]=l.exports},"81d7":function(e,t,r){"use strict";r("05b6")},"90e7":function(e,t,r){"use strict";r.d(t,"m",(function(){return a})),r.d(t,"u",(function(){return n})),r.d(t,"x",(function(){return s})),r.d(t,"v",(function(){return o})),r.d(t,"w",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return d})),r.d(t,"g",(function(){return u})),r.d(t,"b",(function(){return p})),r.d(t,"f",(function(){return m})),r.d(t,"e",(function(){return _})),r.d(t,"d",(function(){return f})),r.d(t,"A",(function(){return h})),r.d(t,"B",(function(){return v})),r.d(t,"j",(function(){return g})),r.d(t,"k",(function(){return b})),r.d(t,"l",(function(){return y})),r.d(t,"y",(function(){return w})),r.d(t,"z",(function(){return k})),r.d(t,"n",(function(){return C})),r.d(t,"o",(function(){return x})),r.d(t,"i",(function(){return L})),r.d(t,"h",(function(){return D})),r.d(t,"C",(function(){return F})),r.d(t,"p",(function(){return O})),r.d(t,"r",(function(){return S})),r.d(t,"s",(function(){return A})),r.d(t,"t",(function(){return V})),r.d(t,"q",(function(){return z}));var i=r("0c6d");function a(e){return i["a"].get("system/role/lst",e)}function n(){return i["a"].get("system/role/create/form")}function s(e){return i["a"].get("system/role/update/form/".concat(e))}function o(e){return i["a"].delete("system/role/delete/".concat(e))}function l(e,t){return i["a"].post("system/role/status/".concat(e),{status:t})}function c(e){return i["a"].get("system/admin/lst",e)}function d(){return i["a"].get("/system/admin/create/form")}function u(e){return i["a"].get("system/admin/update/form/".concat(e))}function p(e){return i["a"].delete("system/admin/delete/".concat(e))}function m(e,t){return i["a"].post("system/admin/status/".concat(e),{status:t})}function _(e){return i["a"].get("system/admin/password/form/".concat(e))}function f(e){return i["a"].get("system/admin/log",e)}function h(){return i["a"].get("take/info")}function v(e){return i["a"].post("take/update",e)}function g(){return i["a"].get("margin/code")}function b(e){return i["a"].get("margin/lst",e)}function y(){return i["a"].post("financial/refund/margin")}function w(){return i["a"].get("serve/info")}function k(e){return i["a"].get("serve/meal",e)}function C(e){return i["a"].get("serve/code",e)}function x(e){return i["a"].get("serve/paylst",e)}function L(e){return i["a"].get("expr/temps",e)}function D(){return i["a"].get("serve/config")}function F(e){return i["a"].post("serve/config",e)}function O(){return i["a"].get("store/printer/create/form")}function S(e){return i["a"].get("store/printer/lst",e)}function A(e,t){return i["a"].post("store/printer/status/".concat(e),t)}function V(e){return i["a"].get("store/printer/update/".concat(e,"/form"))}function z(e){return i["a"].delete("store/printer/delete/".concat(e))}},"9a58":function(e,t,r){"use strict";r("6067")},"9ddc":function(e,t,r){},bd9b:function(e,t){e.exports="data:image/jpeg;base64,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"},e932:function(e,t,r){},f8b7:function(e,t,r){"use strict";r.d(t,"E",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return s})),r.d(t,"I",(function(){return o})),r.d(t,"B",(function(){return l})),r.d(t,"C",(function(){return c})),r.d(t,"F",(function(){return d})),r.d(t,"H",(function(){return u})),r.d(t,"A",(function(){return p})),r.d(t,"G",(function(){return m})),r.d(t,"P",(function(){return _})),r.d(t,"N",(function(){return f})),r.d(t,"S",(function(){return h})),r.d(t,"R",(function(){return v})),r.d(t,"Q",(function(){return g})),r.d(t,"M",(function(){return b})),r.d(t,"d",(function(){return y})),r.d(t,"r",(function(){return w})),r.d(t,"O",(function(){return k})),r.d(t,"m",(function(){return C})),r.d(t,"l",(function(){return x})),r.d(t,"k",(function(){return L})),r.d(t,"j",(function(){return D})),r.d(t,"z",(function(){return F})),r.d(t,"t",(function(){return O})),r.d(t,"D",(function(){return S})),r.d(t,"U",(function(){return A})),r.d(t,"V",(function(){return V})),r.d(t,"T",(function(){return z})),r.d(t,"x",(function(){return T})),r.d(t,"w",(function(){return $})),r.d(t,"u",(function(){return N})),r.d(t,"v",(function(){return j})),r.d(t,"y",(function(){return E})),r.d(t,"i",(function(){return B})),r.d(t,"g",(function(){return P})),r.d(t,"h",(function(){return I})),r.d(t,"L",(function(){return q})),r.d(t,"o",(function(){return M})),r.d(t,"n",(function(){return R})),r.d(t,"a",(function(){return W})),r.d(t,"q",(function(){return H})),r.d(t,"s",(function(){return G})),r.d(t,"p",(function(){return Q})),r.d(t,"f",(function(){return U})),r.d(t,"e",(function(){return J})),r.d(t,"K",(function(){return Y})),r.d(t,"J",(function(){return Z}));var i=r("0c6d");function a(e){return i["a"].get("store/order/lst",e)}function n(){return i["a"].get("store/order/chart")}function s(e){return i["a"].get("store/order/title",e)}function o(e,t){return i["a"].post("store/order/update/".concat(e),t)}function l(e,t){return i["a"].post("store/order/delivery/".concat(e),t)}function c(e){return i["a"].get("store/order/detail/".concat(e))}function d(e,t){return i["a"].get("store/order/log/".concat(e),t)}function u(e){return i["a"].get("store/order/remark/".concat(e,"/form"))}function p(e){return i["a"].post("store/order/delete/".concat(e))}function m(e){return i["a"].get("store/order/printer/".concat(e))}function _(e){return i["a"].get("store/refundorder/lst",e)}function f(e){return i["a"].get("store/refundorder/detail/".concat(e))}function h(e){return i["a"].get("store/refundorder/status/".concat(e,"/form"))}function v(e){return i["a"].get("store/refundorder/mark/".concat(e,"/form"))}function g(e){return i["a"].get("store/refundorder/log/".concat(e))}function b(e){return i["a"].get("store/refundorder/delete/".concat(e))}function y(e){return i["a"].post("store/refundorder/refund/".concat(e))}function w(e){return i["a"].get("store/order/express/".concat(e))}function k(e){return i["a"].get("store/refundorder/express/".concat(e))}function C(e){return i["a"].get("store/order/excel",e)}function x(e){return i["a"].get("store/order/delivery_export",e)}function L(e){return i["a"].get("excel/lst",e)}function D(e){return i["a"].get("excel/download/".concat(e))}function F(e){return i["a"].get("store/order/verify/".concat(e))}function O(e,t){return i["a"].post("store/order/verify/".concat(e),t)}function S(){return i["a"].get("store/order/filtter")}function A(){return i["a"].get("store/order/takechart")}function V(e){return i["a"].get("store/order/takelst",e)}function z(e){return i["a"].get("store/order/take_title",e)}function T(e){return i["a"].get("store/receipt/lst",e)}function $(e){return i["a"].get("store/receipt/set_recipt",e)}function N(e){return i["a"].post("store/receipt/save_recipt",e)}function j(e){return i["a"].get("store/receipt/detail/".concat(e))}function E(e,t){return i["a"].post("store/receipt/update/".concat(e),t)}function B(e){return i["a"].get("store/import/lst",e)}function P(e,t){return i["a"].get("store/import/detail/".concat(e),t)}function I(e){return i["a"].get("store/import/excel/".concat(e))}function q(e){return i["a"].get("store/refundorder/excel",e)}function M(){return i["a"].get("expr/options")}function R(e){return i["a"].get("expr/temps",e)}function W(e){return i["a"].post("store/order/delivery_batch",e)}function H(){return i["a"].get("serve/config")}function G(){return i["a"].get("delivery/station/select")}function Q(){return i["a"].get("delivery/station/options")}function U(e){return i["a"].get("delivery/order/lst",e)}function J(e){return i["a"].get("delivery/order/cancel/".concat(e,"/form"))}function Y(e){return i["a"].get("delivery/station/payLst",e)}function Z(e){return i["a"].get("delivery/station/code",e)}}}]);