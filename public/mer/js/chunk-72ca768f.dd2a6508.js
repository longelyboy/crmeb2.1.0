(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72ca768f"],{"3ae5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"information"},[e.tabList.length>0?r("el-tabs",{model:{value:e.infoType,callback:function(t){e.infoType=t},expression:"infoType"}},e._l(e.tabList,(function(e,t){return r("el-tab-pane",{key:t,attrs:{name:e.value,label:e.title}})})),1):e._e(),e._v(" "),e.merModel?r("div",{staticClass:"business-msg",staticStyle:{"min-height":"600px"}},["1"==e.infoType?r("div",{staticClass:"user-msg"},[r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v("商户名称：")]),e._v("\n         "+e._s(e.merData.mer_name)+"\n      ")]),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v("商户负责人手机号：")]),e._v("\n         "+e._s(e.merData.mer_phone)+"\n      ")]),e._v(" "),e.merData.merchantCategory.category_name?r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v("商户分类：")]),e._v("\n         "+e._s(e.merData.merchantCategory.category_name||"")+"\n      ")]):e._e(),e._v(" "),e.merData.merchantCategory.category_name?r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 商户类别：")]),e._v("\n        "+e._s(e.merData.is_trader?"自营":"非自营")+"\n      ")]):e._e(),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 商户负责人姓名：")]),e._v("\n         "+e._s(e.merData.real_name)+"\n      ")]),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 商户入驻时间：")]),e._v("\n        "+e._s(e.merData.create_time)+"\n      ")]),e._v(" "),e.merData.sub_mchid?r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 商户入驻时间：")]),e._v("\n        "+e._s(e.merData.create_time)+"\n      ")]):e._e(),e._v(" "),e.merData.sub_mchid&&e.merData.merchantType?r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 店铺类型：")]),e._v("\n        "+e._s(e.merData.merchantType.type_name)+"\n      ")]):e._e(),e._v(" "),r("div",{staticClass:"basic-information"},[r("div",[r("span",{staticClass:"basic-label"},[e._v("是否开启商户：")]),e._v(" "),1==e.merData.is_margin&&0==e.merData.mer_state?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"请先支付店铺保证金！",placement:"top-start"}},[r("el-switch",{attrs:{disabled:"","active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},model:{value:e.merData.mer_state,callback:function(t){e.$set(e.merData,"mer_state",t)},expression:"merData.mer_state"}})],1):r("el-switch",{attrs:{"active-text":"开启","inactive-text":"关闭","active-value":1,"inactive-value":0},model:{value:e.merData.mer_state,callback:function(t){e.$set(e.merData,"mer_state",t)},expression:"merData.mer_state"}}),e._v(" "),r("span",{staticClass:"trip"},[e._v("开启，店铺即可展示在移动端")])],1)]),e._v(" "),r("div",{staticClass:"basic-information"},[0!=e.merData.is_margin?r("div",[1==e.merData.is_margin?r("div",[r("span",{staticClass:"basic-label"},[e._v("店铺保证金：")]),e._v(" "),r("span",{staticClass:"font_red"},[e._v(e._s(e.merData.margin)+"元")]),e._v(" "),r("div",{staticClass:"margin_count",on:{mouseenter:function(t){return e.getCode()}}},[r("el-button",{staticClass:"mr10 pay_btn",attrs:{type:"text",size:"small"}},[e._v("去支付保证金")]),e._v(" "),r("div",{staticClass:"erweima"},[r("div",{staticClass:"pay_title"},[e._v("支付保证金")]),e._v(" "),r("div",[r("vue-qr",{staticClass:"bicode",attrs:{text:e.qrCode,size:310}}),e._v(" "),r("div",{staticClass:"pay_type"},[e._v("请使用微信扫码支付")]),e._v(" "),r("div",{staticClass:"pay_price"},[e._v("￥"+e._s(e.merData.margin)+"元")]),e._v(" "),r("div",{staticClass:"pay_time"},[e._v("支付码过期时间： "+e._s(e.qrEndTime))])],1)])],1)]):e._e(),e._v(" "),1!=e.merData.is_margin?r("div",{staticClass:"margin_main"},[r("span",{staticClass:"basic-label"},[e._v("店铺保证金：")]),e._v(" "),r("span",{staticClass:"margin_price"},[e._v(e._s(e.merData.margin)+"元")]),e._v(" "),r("div",{staticClass:"margin_count"},[r("el-button",{staticClass:"mr10",attrs:{type:"text",size:"small"},on:{click:e.viewRecords}},[e._v("查看保证金记录")])],1),e._v(" "),r("div",{staticClass:"margin_modal"},[r("div",[-10==e.merData.is_margin?r("img",{attrs:{src:a("e4ef")}}):e._e(),e._v(" "),-1==e.merData.is_margin?r("img",{attrs:{src:a("7a01")}}):e._e(),e._v(" "),10==e.merData.is_margin?r("img",{attrs:{src:a("4751")}}):e._e(),e._v(" "),10==e.merData.is_margin?r("div",{staticClass:"alic"},[r("span",{staticClass:"text_g"},[e._v("已支付保证金￥"+e._s(e.merData.margin)+"元")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.applyReturn}},[e._v("申请退回保证金")])],1):e._e(),e._v(" "),-1==e.merData.is_margin?r("div",{staticClass:"alic"},[r("span",{staticClass:"text_b b01"},[e._v(" 审核中")]),e._v(" "),r("div",{staticClass:"margin_refused"},[e._v("您申请退回保证金，正在审核中…")])]):e._e(),e._v(" "),-10==e.merData.is_margin?r("div",{staticClass:"alic"},[r("span",{staticClass:"text_b b02"},[e._v("审核未通过")]),e._v(" "),r("div",{staticClass:"margin_refused"},[e._v("未通过原因："),r("span",[e._v(e._s(e.merData.refundMarginOrder.refusal))])]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.applyReturn}},[e._v("再次申请")])],1):e._e()])])]):e._e()]):e._e()])]):e._e(),e._v(" "),"2"==e.infoType?r("div",{staticClass:"business-msg"},[r("div",{staticClass:"form-data"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.merData,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{staticClass:"form-item",attrs:{label:"店铺背景图：",prop:"mer_banner"}},[r("div",{staticClass:"upLoadPicBox",on:{click:function(t){return e.modalPicTap("1")}}},[e.merData.mer_banner?r("div",{staticClass:"pictrue"},[r("img",{attrs:{src:e.merData.mer_banner}})]):r("div",{staticClass:"upLoad"},[r("i",{staticClass:"el-icon-camera cameraIconfont"})]),e._v(" "),r("div",{staticClass:"trip"},[e._v("建议尺寸：710*200px")])])]),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"店铺头像：",prop:"mer_avatar"}},[r("div",{staticClass:"upLoadPicBox",on:{click:function(t){return e.modalPicTap("2")}}},[e.merData.mer_avatar?r("div",{staticClass:"pictrue"},[r("img",{attrs:{src:e.merData.mer_avatar}})]):r("div",{staticClass:"upLoad"},[r("i",{staticClass:"el-icon-camera cameraIconfont"})]),e._v(" "),r("div",{staticClass:"trip"},[e._v("建议尺寸：120*120px")])])]),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"店铺街背景图："}},[r("div",{staticClass:"upLoadPicBox",on:{click:function(t){return e.modalPicTap("3")}}},[e.merData.mini_banner?r("div",{staticClass:"pictrue"},[r("img",{attrs:{src:e.merData.mini_banner}})]):r("div",{staticClass:"upLoad"},[r("i",{staticClass:"el-icon-camera cameraIconfont"})]),e._v(" "),r("div",{staticClass:"trip"},[e._v("建议尺寸：710*134px或710*460px(请根据平台要求选择尺寸，此图如未上传默认展示店铺背景图)")])])]),e._v(" "),r("el-form-item",{staticClass:"form-item",attrs:{label:"店铺资质：",prop:1==e.merData.sys_bases_status?"uploadedqualifications":""}},[r("div",{staticClass:"upLoadPicBox_qualification"},[e._l(e.uploadedQualifications,(function(t,a){return r("div",{key:a,staticClass:"uploadpicBox_list"},[r("div",{staticClass:"uploadpicBox_list_image"},[r("el-image",{ref:"elImage",refInFor:!0,attrs:{src:t.url,"preview-src-list":[t.url]}})],1),e._v(" "),r("div",{staticClass:"uploadpicBox_list_method"},[r("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.deldetQualificationsList(a)}}}),e._v(" "),r("i",{staticClass:"el-icon-view",on:{click:function(r){return e.viewImage(t,a)}}})])])})),e._v(" "),r("el-upload",{attrs:{action:e.fileUrl,"show-file-list":!1,"list-type":"picture-card",multiple:"",headers:e.myHeaders,"on-success":e.setQualificationsList,"before-upload":e.beforeUploadQualification}},[r("i",{staticClass:"el-icon-plus"})])],2)]),e._v(" "),r("el-form-item",{attrs:{label:"配送方式:",prop:"delivery_way"}},[r("el-checkbox-group",{model:{value:e.merData.delivery_way,callback:function(t){e.$set(e.merData,"delivery_way",t)},expression:"merData.delivery_way"}},e._l(e.deliveryList,(function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1),e._v(" "),r("span",{staticClass:"trip"},[e._v("只选择一种配送方式时,会自动修改店铺所有商品的配送方式")])],1),e._v(" "),1==e.merData.delivery_way.length&&"1"==e.merData.delivery_way[0]||2==e.merData.delivery_way.length?r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"提货点名称：",prop:"mer_take_name"}},[r("el-input",{attrs:{maxlength:"30",placeholder:"请输入提货点名称"},model:{value:e.merData.mer_take_name,callback:function(t){e.$set(e.merData,"mer_take_name",t)},expression:"merData.mer_take_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"提货点电话：",prop:"mer_take_phone"}},[r("el-input",{attrs:{placeholder:"请输入提货点电话"},model:{value:e.merData.mer_take_phone,callback:function(t){e.$set(e.merData,"mer_take_phone",t)},expression:"merData.mer_take_phone"}})],1)],1)],1):e._e(),e._v(" "),1==e.merData.delivery_way.length&&"1"==e.merData.delivery_way[0]||2==e.merData.delivery_way.length?r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"详细地址：",prop:"mer_take_address"}},[r("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.merData.mer_take_address,callback:function(t){e.$set(e.merData,"mer_take_address",t)},expression:"merData.mer_take_address"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"经纬度：",prop:"mer_take_location"}},[r("el-input",{attrs:{"enter-button":"查找位置",placeholder:"请查找位置",readonly:""},model:{value:e.merData.mer_take_location,callback:function(t){e.$set(e.merData,"mer_take_location",t)},expression:"merData.mer_take_location"}},[r("el-button",{staticStyle:{background:"#46a6ff",color:"#fff","border-radius":"0 4px 4px 0"},attrs:{slot:"append"},on:{click:e.onSearchs},slot:"append"},[e._v("查找位置")])],1),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[e._v("请点击查找位置选择位置")])],1)],1)],1):e._e(),e._v(" "),1==e.merData.delivery_way.length&&"1"==e.merData.delivery_way[0]||2==e.merData.delivery_way.length?r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"提货点营业日期：",prop:"mer_take_day"}},[r("el-select",{attrs:{filterable:"",multiple:"",placeholder:"请选择营业时间"},model:{value:e.merData.mer_take_day,callback:function(t){e.$set(e.merData,"mer_take_day",t)},expression:"merData.mer_take_day"}},e._l(e.date,(function(e){return r("el-option",{key:e.date_id,attrs:{label:e.date_name,value:e.date_id}})})),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"提货点营业时间：",required:""}},[r("el-time-picker",{attrs:{placeholder:"开始时间","value-format":"HH:mm"},on:{change:e.onchangeTime1},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),e._v(" "),r("el-time-picker",{attrs:{placeholder:"结束时间","value-format":"HH:mm"},on:{change:e.onchangeTime2},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1)],1):e._e(),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"商户简介：",prop:"mer_info"}},[r("el-input",{attrs:{type:"textarea",placeholder:"文字简介，200字以内"},model:{value:e.merData.mer_info,callback:function(t){e.$set(e.merData,"mer_info",t)},expression:"merData.mer_info"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"商户关键字：",prop:"mer_keyword"}},[r("div",{staticClass:"tip-form"},[r("el-input",{staticStyle:{"min-width":"200px"},attrs:{placeholder:"用户在搜索该关键字时，可搜索到本店铺"},model:{value:e.merData.mer_keyword,callback:function(t){e.$set(e.merData,"mer_keyword",t)},expression:"merData.mer_keyword"}})],1)]),e._v(" "),r("el-form-item",{attrs:{label:"客服电话：",prop:"service_phone"}},[r("el-input",{model:{value:e.merData.service_phone,callback:function(t){e.$set(e.merData,"service_phone",t)},expression:"merData.service_phone"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"商户地址：",prop:"mer_address"}},[r("el-input",{attrs:{"enter-button":"查找位置",placeholder:"请输入商户地址（地址中请包含城市名称，否则会影响搜索精度）"},model:{value:e.merData.mer_address,callback:function(t){e.$set(e.merData,"mer_address",t)},expression:"merData.mer_address"}},[r("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.onSearch},slot:"append"},[e._v("查找位置")])],1)],1)],1)],1),e._v(" "),r("div",{staticStyle:{width:"460px","margin-left":"150px"}},[e.mapKey?r("Maps",{ref:"mapChild",staticClass:"map-sty",attrs:{"map-key":e.mapKey,lat:Number(e.merData.lat||34.34127),lon:Number(e.merData.long||108.93984),address:e.merData.mer_address},on:{getCoordinates:e.getCoordinates}}):e._e()],1),e._v(" "),r("el-form-item")],1)],1)]):e._e(),e._v(" "),"3"==e.infoType?r("div",{staticClass:"user-msg"},[r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 商户手续费：")]),e._v("\n        "+e._s(Number(e.merData.commission_rate)>0?parseFloat(e.merData.commission_rate).toFixed(2):parseFloat(100*e.merData.merchantCategory.commission_rate).toFixed(2))+"%\n      ")]),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 添加商品：")]),e._v("\n        "+e._s(e.merData.is_audit?"需平台审核":"平台免审核")+"\n      ")]),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 开启直播间：")]),e._v("\n        "+e._s(e.merData.is_bro_room?"需平台审核":"平台免审核")+"\n      ")]),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 添加直播商品：")]),e._v("\n        "+e._s(e.merData.is_bro_goods?"需平台审核":"平台免审核")+"\n      ")]),e._v(" "),r("div",{staticClass:"basic-information"},[r("span",{staticClass:"basic-label"},[e._v(" 平台首页推荐商户：")]),e._v("\n        "+e._s(e.merData.is_best?"是":"否")+"\n      ")])]):e._e(),e._v(" "),3!=e.infoType?r("div",{staticClass:"submit-button"},[r("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1):e._e()]):e._e(),e._v(" "),e.modalMap?r("el-dialog",{staticClass:"mapBox",attrs:{visible:e.modalMap,title:"选择位置","close-on-click-modal":"","custom-class":"dialog-scustom"},on:{"update:visible":function(t){e.modalMap=t}},model:{value:e.modalMap,callback:function(t){e.modalMap=t},expression:"modalMap"}},[r("iframe",{attrs:{id:"mapPage",width:"100%",height:"500px",frameborder:"0",src:e.keyUrl}})]):e._e(),e._v(" "),e.modalRecord?r("el-dialog",{staticClass:"mapBox",attrs:{visible:e.modalRecord,title:"扣费记录",width:"700px","close-on-click-modal":"","custom-class":"dialog-scustom"},on:{"update:visible":function(t){e.modalRecord=t}}},[r("el-table",{attrs:{data:e.tableData.data,loading:e.loading}},[r("el-table-column",{attrs:{label:"序号","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.$index+(e.tableFrom.page-1)*e.tableFrom.limit+1))])]}}],null,!1,2611860760)}),e._v(" "),r("el-table-column",{attrs:{label:"扣费原因","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.title))])]}}],null,!1,1808518502)}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:"扣费金额","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"操作时间","min-width":"200"}})],1),e._v(" "),r("div",{staticClass:"acea-row row-right page"},[r("el-pagination",{attrs:{"page-sizes":[20,40,60,80],"page-size":e.tableFrom.limit,"current-page":e.tableFrom.page,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.pageChange}})],1)],1):e._e()],1)},i=[],s=a("c80c"),n=(a("96cf"),a("3b8d")),o=(a("28a5"),a("456d"),a("ac6a"),a("90e7")),l=a("c24f"),c=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"100%",height:"450px"},attrs:{id:"container"}})])}];a("c5f6");function d(e){return new Promise((function(t,a){window.init=function(){t(window.qq)};var r=document.createElement("script");r.type="text/javascript",r.src="https://map.qq.com/api/js?v=2.exp&callback=init&key=".concat(e),r.onerror=a,document.head.appendChild(r)}))}var u={props:{lat:{type:Number,default:34.34127},lon:{type:Number,default:108.93984},mapKey:{tyep:String},address:{tyep:String}},data:function(){return{geocoder:void 0,marker:null,resultDatail:{}}},created:function(){this.initMap()},methods:{initMap:function(){var e=this;d(this.mapKey).then((function(t){var a,r=new t.maps.LatLng(e.lat,e.lon);a=new t.maps.Map(document.getElementById("container"),{zoom:15}),e.geocoder=new t.maps.Geocoder({complete:function(r){a.setCenter(r.detail.location),e.marker=new t.maps.Marker({map:a,position:r.detail.location}),e.resultDatail=r.detail,e.$emit("getCoordinates",r.detail)}}),console.log(e.address),e.geocoder.getAddress(r),t.maps.event.addListener(a,"click",(function(a){e.marker.setMap(null),e.marker.position={lat:a.latLng.getLat(),lng:a.latLng.getLng()};var r=new t.maps.LatLng(a.latLng.getLat(),a.latLng.getLng());e.geocoder.getAddress(r)}))}))},searchKeyword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"西安";this.marker.setMap(null),this.geocoder.getLocation(e)}}},_=u,p=a("2877"),f=Object(p["a"])(_,c,m,!1,null,"260d52a7",null),v=f.exports,g=a("5f87"),b=a("bbcc"),h=a("83d6"),y=a("658f"),k=a.n(y),D={name:"Information",components:{Maps:v,VueQr:k.a},data:function(){var e=function(e,t,a){if(""===t)a(new Error("请输入客服电话"));else{var r=null,i=/^1(3|4|5|6|7|8|9)\d{9}$/,s=/^(0[0-9]{2,3}\-)([2-9][0-9]{4,7})+(\-[0-9]{1,4})?$/,n=/^400-[016789]\d{2}-\d{4}$/;if(r=0==t.charAt(0)?s:4==t.charAt(0)?n:i,!r.test(t))return a(new Error("请填写客服电话(座机格式'区号-座机号码'),400格式：400-XXX-XXXX"));a()}},t=function(e,t,a){if(!t)return a(new Error("请填写手机号"));/^1[3456789]\d{9}$/.test(t)?a():a(new Error("手机号格式不正确!"))};return{merModel:!1,modalMap:!1,modalRecord:!1,loading:!1,roterPre:h["roterPre"],qrCode:"",qrEndTime:"",tableFrom:{page:1,limit:20},tableData:{total:0,data:[]},value1:"",value2:"",merData:{delivery_way:[],mer_take_name:"",mer_take_phone:"",mer_take_address:"",mer_take_time:["",""],mer_take_day:[],mer_take_location:"",id:0,mer_take_status:0},myHeaders:{"X-Token":Object(g["a"])()},uploadedQualifications:[],mapKey:"",address:"",key:"",date:[{date_name:"周一",date_id:1},{date_name:"周二",date_id:2},{date_name:"周三",date_id:3},{date_name:"周四",date_id:4},{date_name:"周五",date_id:5},{date_name:"周六",date_id:6},{date_name:"周日",date_id:7}],submitLoading:!1,deliveryList:[{value:"1",name:"到店自提"},{value:"2",name:"快递配送"}],rules:{mer_banner:[{required:!0,message:"请上传店铺banner"}],mer_avatar:[{required:!0,message:"请上传店铺头像"}],mer_info:[{required:!0,message:"请输入商户简介",trigger:"blur"},{min:3,max:200,message:"长度在 3 到 200 个字符",trigger:"blur"}],mer_keyword:[{required:!1,message:"请输入商户关键字",trigger:"blur"}],service_phone:[{required:!0,validator:e,trigger:"blur"}],mer_address:[{required:!0,message:"请输入商户地址",trigger:"blur"}],uploadedqualifications:[{required:!0,message:"请上传商户资质",trigger:"blur"}],delivery_way:[{required:!0,message:"请选择送货方式",trigger:"change"}],mer_take_name:[{required:!0,message:"请输入提货点名称",trigger:"blur"}],mer_take_day:[{required:!0,type:"array",message:"请选择提货点营业日期",trigger:"change"}],mer_take_time:[{required:!0,message:"请选择提货点营业时间",trigger:"change"}],mer_take_phone:[{required:!0,validator:t,trigger:"blur"}],mer_take_address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mer_take_location:[{required:!0,message:"请选择经纬度",trigger:"blur"}]},keyUrl:"",infoType:"1",tabList:[{value:"1",title:"基本信息"},{value:"2",title:"店铺信息"},{value:"3",title:"功能信息"}]}},computed:{fileUrl:function(){return b["a"].https+"/upload/certificate"}},watch:{uploadedQualifications:function(e){e.length?this.merData.uploadedqualifications=1:this.merData.uploadedqualifications=""}},created:function(){this.getMapInfo()},mounted:function(){window.addEventListener("message",(function(e){var t=e.data;t&&"locationPicker"===t.module&&window.parent.selectAdderss(t)}),!1),window.selectAdderss=this.selectAdderss,this.getInfo()},methods:{onchangeTime1:function(e){this.value1=e,this.merData.mer_take_time[0]=e},onchangeTime2:function(e){this.value2=e,this.merData.mer_take_time[1]=e},selectAdderss:function(e){this.merData.mer_take_location=e.latlng.lat+","+e.latlng.lng,this.modalMap=!1},onSearchs:function(){this.key&&""!=this.key?this.modalMap=!0:this.$message.error("平台未配置腾讯地图KEY")},getCoordinates:function(e){this.merData.lat=e.location.lat||34.34127,this.merData.long=e.location.lng||108.93984,console.log(e)},getInfo:function(){var e=this,t=this;t.merModel=!1,Object(l["i"])().then((function(a){t.merData=a.data,t.$set(t.merData,"uploadedqualifications",""),t.$set(t.merData,"delivery_way",a.data.delivery_way&&a.data.delivery_way.length?a.data.delivery_way.map(String):[]),t.key=a.data.tx_map_key;var r=a.data.tx_map_key;t.keyUrl="https://apis.map.qq.com/tools/locpicker?type=1&key=".concat(r,"&referer=myapp");var i=a.data||null;t.value1=i.mer_take_time[0]||"",t.value2=i.mer_take_time[1]||"",t.merData.mer_take_time=i.mer_take_time||["",""],t.merData.mer_take_day=i.mer_take_day||[],t.merData.mer_take_phone=i.mer_take_phone,t.merData.mer_take_name=i.mer_take_name,t.merData.mer_take_address=i.mer_take_address,t.merData.is_margin=i.is_margin,t.merData.margin=i.margin,t.merData.mer_take_location=i.mer_take_location&&i.mer_take_location.length?i.mer_take_location[0]+","+i.mer_take_location[1]:"",t.merData.mer_take_status=i.mer_take_status||0,t.merData.refundMarginOrder=i.refundMarginOrder,e.merModel=!0,a.data.mer_certificate instanceof Array?a.data.mer_certificate.forEach((function(e){t.uploadedQualifications.push({url:e})})):t.uploadedQualifications=[],1==t.merData.is_margin&&e.getCode()}))},submitForm:function(e){var t=this;if(2==this.infoType)this.$refs[e].validate((function(e){if(!e)return t.$message.error("请完善信息后再进行提交"),t.submitLoading=!1,!1;var a=Object.keys(t.rules),r={};[].concat(a,["mer_state","long","lat","mini_banner"]).map((function(e){r[e]=t.merData[e]})),r.type=t.infoType,r.mer_certificate=t.uploadedQualifications.map((function(e){return e.response?e.response.data.src:e.url}));var i=t.merData.mer_take_location?[t.merData.mer_take_location.split(",")[0],t.merData.mer_take_location.split(",")[1]]:[];r.mer_take_location=i,t.submitLoading=!0,Object(l["u"])(r).then((function(e){console.log(e),t.submitLoading=!1,t.$message.success("提交成功")})).catch((function(e){t.submitLoading=!1,t.$message.error(e.data.message)}))}));else{var a={mer_state:this.merData.mer_state,type:this.infoType};Object(l["u"])(a).then((function(e){console.log(e),t.submitLoading=!1,t.$message.success("提交成功")})).catch((function(e){t.submitLoading=!1,t.$message.error(e.data.message)}))}},getCode:function(){var e=this;Object(o["j"])().then((function(t){e.qrCode=t.data.config,e.qrEndTime=t.data.endtime})).catch((function(e){that.$message.error(e.message)}))},viewRecords:function(){this.modalRecord=!0,this.getRecordList()},getRecordList:function(){var e=this;e.loading=!0,Object(o["k"])(e.tableFrom).then(function(){var t=Object(n["a"])(Object(s["a"])().mark((function t(a){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.tableData.data=a.data.list,e.tableData.total=a.data.count,e.loading=!1;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$message.error(t.message)}))},pageChange:function(e){this.tableFrom.page=e,this.getList()},handleSizeChange:function(e){this.tableFrom.limit=e,this.getList()},applyReturn:function(){var e=this;e.$confirm("申请退回保证金则视为关闭店铺，请谨慎操作！您是否确定继续操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["l"])().then((function(t){console.log(t),e.$message.success(t.message),e.getInfo()})).catch((function(t){e.$message.error(t.message)}))}))},onSearch:function(){console.log(this.$refs),this.$refs.mapChild.searchKeyword(this.merData.mer_address)},getMapInfo:function(){var e=this,t=this;Object(o["A"])().then((function(t){console.log(t),e.mapKey=t.data.tx_map_key})).catch((function(e){t.$message.error(e.message)}))},modalPicTap:function(e,t,a){var r=this;this.$modalUpload((function(a){"1"!==e||t||(r.merData.mer_banner=a[0]),"2"!==e||t||(r.merData.mer_avatar=a[0]),"3"!==e||t||(r.merData.mini_banner=a[0])}),e)},deldetQualificationsList:function(e){this.uploadedQualifications.splice(e,1)},beforeUploadQualification:function(){return!(this.uploadedQualifications.length>=5)||(this.$message.error("上传文件最大数量为5张, 上传失败!"),!1)},setQualificationsList:function(e){200===e.status?this.uploadedQualifications.push({url:e.data.src}):this.$message.error(e.message)},viewImage:function(e,t){this.$refs.elImage[t].clickHandler()}}},C=D,w=(a("ff18"),Object(p["a"])(C,r,i,!1,null,"14254666",null));t["default"]=w.exports},4751:function(e,t,a){e.exports=a.p+"mer/img/margin03.d9148792.png"},"7a01":function(e,t,a){e.exports=a.p+"mer/img/margin02.3431ab5b.png"},"90e7":function(e,t,a){"use strict";a.d(t,"m",(function(){return i})),a.d(t,"u",(function(){return s})),a.d(t,"x",(function(){return n})),a.d(t,"v",(function(){return o})),a.d(t,"w",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return m})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"f",(function(){return _})),a.d(t,"e",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"A",(function(){return v})),a.d(t,"B",(function(){return g})),a.d(t,"j",(function(){return b})),a.d(t,"k",(function(){return h})),a.d(t,"l",(function(){return y})),a.d(t,"y",(function(){return k})),a.d(t,"z",(function(){return D})),a.d(t,"n",(function(){return C})),a.d(t,"o",(function(){return w})),a.d(t,"i",(function(){return x})),a.d(t,"h",(function(){return L})),a.d(t,"C",(function(){return $})),a.d(t,"p",(function(){return q})),a.d(t,"r",(function(){return T})),a.d(t,"s",(function(){return M})),a.d(t,"t",(function(){return j})),a.d(t,"q",(function(){return F}));var r=a("0c6d");function i(e){return r["a"].get("system/role/lst",e)}function s(){return r["a"].get("system/role/create/form")}function n(e){return r["a"].get("system/role/update/form/".concat(e))}function o(e){return r["a"].delete("system/role/delete/".concat(e))}function l(e,t){return r["a"].post("system/role/status/".concat(e),{status:t})}function c(e){return r["a"].get("system/admin/lst",e)}function m(){return r["a"].get("/system/admin/create/form")}function d(e){return r["a"].get("system/admin/update/form/".concat(e))}function u(e){return r["a"].delete("system/admin/delete/".concat(e))}function _(e,t){return r["a"].post("system/admin/status/".concat(e),{status:t})}function p(e){return r["a"].get("system/admin/password/form/".concat(e))}function f(e){return r["a"].get("system/admin/log",e)}function v(){return r["a"].get("take/info")}function g(e){return r["a"].post("take/update",e)}function b(){return r["a"].get("margin/code")}function h(e){return r["a"].get("margin/lst",e)}function y(){return r["a"].post("financial/refund/margin")}function k(){return r["a"].get("serve/info")}function D(e){return r["a"].get("serve/meal",e)}function C(e){return r["a"].get("serve/code",e)}function w(e){return r["a"].get("serve/paylst",e)}function x(e){return r["a"].get("expr/temps",e)}function L(){return r["a"].get("serve/config")}function $(e){return r["a"].post("serve/config",e)}function q(){return r["a"].get("store/printer/create/form")}function T(e){return r["a"].get("store/printer/lst",e)}function M(e,t){return r["a"].post("store/printer/status/".concat(e),t)}function j(e){return r["a"].get("store/printer/update/".concat(e,"/form"))}function F(e){return r["a"].delete("store/printer/delete/".concat(e))}},e4ef:function(e,t,a){e.exports=a.p+"mer/img/margin01.1defbb63.png"},fd26:function(e,t,a){},ff18:function(e,t,a){"use strict";a("fd26")}}]);